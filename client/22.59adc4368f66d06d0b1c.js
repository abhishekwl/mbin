(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{2702:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),n=a(286),s=a(779),l=a(96),i=a(770),u=function(e){return e&&e.__esModule?e:{default:e}}(a(2703));t.default=(0,n.connect)(function(e){var t=(0,l.getConfig)(e).SiteName;return{isLoggedIn:Boolean((0,i.getCurrentUserId)(e)),siteName:t,user:(0,i.getCurrentUser)(e)}},function(e){return{actions:(0,r.bindActionCreators)({verifyUserEmail:s.verifyUserEmail,updateMe:s.updateMe},e)}})(u.default)},2703:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=M(a(184)),n=M(a(181)),s=M(a(182)),l=M(a(282)),i=M(a(281)),u=M(a(285)),o=M(a(283)),d=M(a(284)),c=M(a(1)),f=M(a(3)),p=a(766),m=M(a(834)),E=a(791),v=a(291),h=a(22),_=M(a(812)),g=M(a(804)),y=M(a(785)),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(773));function M(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){var a=this;(0,i.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.verifyEmail=(0,s.default)(n.default.mark(function e(){var t,s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.actions.verifyUserEmail,e.next=3,t(new URLSearchParams(r.props.location.search).get("token"));case 3:(s=e.sent)&&s.data?r.handleSuccess():s&&s.error&&r.handleError(h.VerifyEmailErrors.FAILED_EMAIL_VERIFICATION);case 5:case"end":return e.stop()}},e,a)})),r.state={verifyStatus:"pending",serverError:""},r}return(0,d.default)(t,e),(0,u.default)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.verifyEmail()}},{key:"handleRedirect",value:function(){this.props.isLoggedIn?I.redirectUserToDefaultTeam():v.browserHistory.push("/login?extra=verified&email="+encodeURIComponent(new URLSearchParams(this.props.location.search).get("email")))}},{key:"handleSuccess",value:function(){var e=this;if(this.setState({verifyStatus:"success"}),m.default.clearError(h.AnnouncementBarMessages.EMAIL_VERIFICATION_REQUIRED),this.props.isLoggedIn){m.default.storeLastError({notification:!0,message:h.AnnouncementBarMessages.EMAIL_VERIFIED,type:h.AnnouncementBarTypes.SUCCESS}),m.default.emitChange();var t=(0,r.default)({},this.props.user);t.email_verified=!0,(0,E.trackEvent)("settings","verify_email"),this.props.actions.updateMe(t).then(function(t){var a=t.data,r=t.error;a?e.handleRedirect():r&&e.handleError(h.VerifyEmailErrors.FAILED_USER_STATE_UPDATE)})}else this.handleRedirect()}},{key:"handleError",value:function(e){var t="";e===h.VerifyEmailErrors.FAILED_EMAIL_VERIFICATION?t=f.default.createElement(p.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid. Please speak with your Administrator to receive an invitation."}):e===h.VerifyEmailErrors.FAILED_USER_STATE_UPDATE&&(t=f.default.createElement(p.FormattedMessage,{id:"signup_user_completed.failed_update_user_state",defaultMessage:"Please clear your cache and try to log in."})),this.setState({verifyStatus:"failure",serverError:t})}},{key:"render",value:function(){if("failure"!==this.state.verifyStatus)return f.default.createElement(y.default,null);var e=null;return this.state.serverError&&(e=f.default.createElement("div",{className:"form-group has-error"},f.default.createElement("label",{className:"control-label"},this.state.serverError))),f.default.createElement("div",null,f.default.createElement(g.default,null),f.default.createElement("div",{className:"col-sm-12"},f.default.createElement("div",{className:"signup-team__container"},f.default.createElement("img",{className:"signup-team-logo",src:_.default}),f.default.createElement("div",{className:"signup__content"},f.default.createElement("h1",null,this.props.siteName),f.default.createElement("h4",{className:"color--light"},f.default.createElement(p.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"})),e))))}}]),t}(f.default.PureComponent);b.propTypes={location:c.default.object.isRequired,siteName:c.default.string,actions:c.default.shape({verifyUserEmail:c.default.func.isRequired,updateMe:c.default.func.isRequired}).isRequired,user:c.default.shape({email_verified:c.default.bool}),isLoggedIn:c.default.bool.isRequired},t.default=b,b.defaultProps={location:{}}},804:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(a(282)),n=p(a(281)),s=p(a(285)),l=p(a(283)),i=p(a(284)),u=p(a(1)),o=p(a(3)),d=a(766),c=a(287),f=a(765);function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"signup-header"},o.default.createElement(c.Link,{onClick:this.props.onClick,to:this.props.url},o.default.createElement("span",{className:"fa fa-chevron-left",title:(0,f.localizeMessage)("generic_icons.back","Back Icon")}),o.default.createElement(d.FormattedMessage,{id:"web.header.back",defaultMessage:"Back"})))}}]),t}(o.default.PureComponent);m.propTypes={url:u.default.string,onClick:u.default.func},m.defaultProps={url:"/"},t.default=m},812:function(e,t,a){e.exports=a.p+"files/5d6be4015bde2a4e0358c8bc110deadc.png"}}]);
//# sourceMappingURL=22.59adc4368f66d06d0b1c.js.map