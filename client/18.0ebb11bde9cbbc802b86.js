(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{2694:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),l=a(96),s=function(e){return e&&e.__esModule?e:{default:e}}(a(2695));t.default=(0,n.connect)(function(e){var t=(0,l.getLicense)(e),a=(0,l.getConfig)(e);return{isLicensed:t&&"true"===t.IsLicensed,enableOpenServer:"true"===a.EnableOpenServer,noAccounts:"true"===a.NoAccounts,enableSignUpWithEmail:"true"===a.EnableSignUpWithEmail,enableSignUpWithGitLab:"true"===a.EnableSignUpWithGitLab,enableSignUpWithGoogle:"true"===a.EnableSignUpWithGoogle,enableSignUpWithOffice365:"true"===a.EnableSignUpWithOffice365,enableLDAP:"true"===a.EnableLdap,enableSAML:"true"===a.EnableSaml,samlLoginButtonText:a.SamlLoginButtonText,siteName:a.SiteName}})(s.default)},2695:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(a(282)),l=k(a(281)),s=k(a(285)),i=k(a(283)),r=k(a(284)),o=k(a(1)),u=k(a(3)),d=a(766),c=a(287),f=a(183),p=a(291),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(773)),g=a(826),h=a(781),b=k(a(842)),E=k(a(774)),v=k(a(812)),_=k(a(864)),M=k(a(804)),S=k(a(811)),L=k(a(785)),w=a(765),N=a(22);function k(e){return e&&e.__esModule?e:{default:e}}var A=function(e){function t(e){(0,l.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));y.call(a),a.renderSignupControls=a.renderSignupControls.bind(a);var s=!1,r="",o=!1,c=!1;if(a.props.location.search){var f=new URLSearchParams(a.props.location.search),p=f.get("t");null==p&&(p="");var m=f.get("id");null==m&&(m=""),m?s=!0:p&&!E.default.getCurrentUser()?c=b.default.getGlobalItem(p):m||a.props.enableOpenServer||a.props.noAccounts||(o=!0,r=u.default.createElement(d.FormattedMessage,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."}))}return a.state={loading:s,serverError:r,noOpenServerError:o,usedBefore:c},a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;if(b.default.removeGlobalItem("team"),this.props.location.search){var t=new URLSearchParams(this.props.location.search),a=t.get("t")||"",n=t.get("id")||"",l=null!=E.default.getCurrentUser();if((n||a)&&l)return void(0,g.addUserToTeamFromInvite)(a,n,function(e){(0,h.loadMe)().then(function(){p.browserHistory.push("/"+e.name+"/channels/"+N.Constants.DEFAULT_CHANNEL)})},this.handleInvalidInvite);if(n)return void(0,g.getInviteInfo)(n,function(t){t&&e.setState({serverError:"",loading:!1})},this.handleInvalidInvite);l&&m.redirectUserToDefaultTeam()}}},{key:"renderSignupControls",value:function(){var e=[];if(this.props.enableSignUpWithEmail&&e.push(u.default.createElement(c.Link,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon fa fa-envelope",title:(0,w.localizeMessage)("signup.email.icon","Email Icon")}),u.default.createElement(d.FormattedMessage,{id:"signup.email",defaultMessage:"Email and Password"})))),this.props.enableSignUpWithGitLab&&e.push(u.default.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:f.Client4.getOAuthRoute()+"/gitlab/signup"+window.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon"}),u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"signup.gitlab",defaultMessage:"GitLab Single Sign-On"}))))),this.props.isLicensed&&this.props.enableSignUpWithGoogle&&e.push(u.default.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:f.Client4.getOAuthRoute()+"/google/signup"+window.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon"}),u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"signup.google",defaultMessage:"Google Account"}))))),this.props.isLicensed&&this.props.enableSignUpWithOffice365&&e.push(u.default.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:f.Client4.getOAuthRoute()+"/office365/signup"+window.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon"}),u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"signup.office365",defaultMessage:"Office 365"}))))),this.props.isLicensed&&this.props.enableLDAP&&e.push(u.default.createElement(c.Link,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/login"+this.props.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon fa fa-folder-open fa--margin-top",title:(0,w.localizeMessage)("signup.ldap.icon","AD/LDAP Icon")}),u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"}))))),this.props.isLicensed&&this.props.enableSAML){var t="";t=window.location.search?"&action=signup":"?action=signup",e.push(u.default.createElement(c.Link,{className:"btn btn-custom-login btn--full saml",key:"saml",to:"/login/sso/saml"+window.location.search+t},u.default.createElement("span",null,u.default.createElement("span",{className:"icon fa fa-lock fa--margin-top",title:(0,w.localizeMessage)("signup.saml.icon","SAML Icon")}),u.default.createElement("span",null,this.props.samlLoginButtonText))))}if(0===e.length){var a=u.default.createElement(d.FormattedMessage,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});e=u.default.createElement(S.default,{error:a,margin:!0})}else if(1===e.length){if(this.props.enableSignUpWithEmail)return p.browserHistory.push("/signup_email"+window.location.search);if(this.props.isLicensed&&this.props.enableLDAP)return p.browserHistory.push("/login"+window.location.search)}return e}},{key:"render",value:function(){if(this.state.loading)return u.default.createElement(L.default,null);if(this.state.usedBefore)return u.default.createElement("div",null,u.default.createElement(d.FormattedMessage,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));var e=null;this.state.serverError&&(e=u.default.createElement("div",{className:"form-group has-error"},u.default.createElement("label",{className:"control-label"},this.state.serverError)));var t=void 0;return t=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),u.default.createElement("div",null,u.default.createElement(_.default,null),u.default.createElement(M.default,null),u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"signup-team__container"},u.default.createElement("img",{className:"signup-team-logo",src:v.default}),u.default.createElement("div",{className:"signup__content"},u.default.createElement("h1",null,this.props.siteName),u.default.createElement("h4",{className:"color--light"},u.default.createElement(d.FormattedMessage,{id:"web.root.signup_info"})),u.default.createElement("div",{className:"margin--extra"},u.default.createElement("h5",null,u.default.createElement("strong",null,u.default.createElement(d.FormattedMessage,{id:"signup.title",defaultMessage:"Create an account with:"})))),t,e),u.default.createElement("span",{className:"color--light"},u.default.createElement(d.FormattedMessage,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",u.default.createElement(c.Link,{to:"/login"+this.props.location.search},u.default.createElement(d.FormattedMessage,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))))))}}]),t}(u.default.Component),y=function(){var e=this;this.handleInvalidInvite=function(t){var a=void 0;a="store.sql_user.save.max_accounts.app_error"===t.server_error_id?t.message:u.default.createElement(d.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."}),e.setState({noOpenServerError:!0,loading:!1,serverError:a})}};t.default=A,A.propTypes={location:o.default.object,isLicensed:o.default.bool.isRequired,enableOpenServer:o.default.bool.isRequired,noAccounts:o.default.bool.isRequired,enableSignUpWithEmail:o.default.bool.isRequired,enableSignUpWithGitLab:o.default.bool.isRequired,enableSignUpWithGoogle:o.default.bool.isRequired,enableSignUpWithOffice365:o.default.bool.isRequired,enableLDAP:o.default.bool.isRequired,enableSAML:o.default.bool.isRequired,samlLoginButtonText:o.default.string,siteName:o.default.string}},804:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(282)),l=p(a(281)),s=p(a(285)),i=p(a(283)),r=p(a(284)),o=p(a(1)),u=p(a(3)),d=a(766),c=a(287),f=a(765);function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,l.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"signup-header"},u.default.createElement(c.Link,{onClick:this.props.onClick,to:this.props.url},u.default.createElement("span",{className:"fa fa-chevron-left",title:(0,f.localizeMessage)("generic_icons.back","Back Icon")}),u.default.createElement(d.FormattedMessage,{id:"web.header.back",defaultMessage:"Back"})))}}]),t}(u.default.PureComponent);m.propTypes={url:o.default.string,onClick:o.default.func},m.defaultProps={url:"/"},t.default=m},812:function(e,t,a){e.exports=a.p+"files/5d6be4015bde2a4e0358c8bc110deadc.png"}}]);
//# sourceMappingURL=18.0ebb11bde9cbbc802b86.js.map