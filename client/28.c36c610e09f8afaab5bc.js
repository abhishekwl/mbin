(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{2729:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=v(a(282)),n=v(a(281)),r=v(a(283)),o=v(a(285)),i=v(a(284)),u=v(a(1)),s=v(a(3)),d=a(766),c=a(792),p=v(a(984)),m=v(a(811)),f=a(291),h=v(a(777));function v(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(e){(0,n.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleAllow=a.handleAllow.bind(a),a.handleDeny=a.handleDeny.bind(a),a.state={},a}return(0,i.default)(t,e),(0,o.default)(t,null,[{key:"propTypes",get:function(){return{location:u.default.object.isRequired,params:u.default.object.isRequired}}}]),(0,o.default)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search).get("client_id");/^[a-z0-9]+$/.test(t)&&(0,c.getOAuthAppInfo)(t,function(t){e.setState({app:t})})}},{key:"componentDidMount",value:function(){var e=document.getElementById("antiClickjack");e&&e.parentNode.removeChild(e)}},{key:"handleAllow",value:function(){var e=this,t=new URLSearchParams(this.props.location.search);(0,c.allowOAuth2)(t,function(e){e.redirect&&(window.location.href=e.redirect)},function(t){e.setState({error:t.message})})}},{key:"handleDeny",value:function(){var e=new URLSearchParams(this.props.location.search).get("redirect_uri");e.startsWith("https://")||e.startsWith("http://")?window.location.href=e+"?error=access_denied":f.browserHistory.replace("/error")}},{key:"render",value:function(){var e=this.state.app;if(!e)return null;var t=void 0;t=e.icon_url?e.icon_url:p.default;var a=void 0;return this.state.error&&(a=s.default.createElement("div",{className:"prompt__error form-group"},s.default.createElement(m.default,{error:this.state.error}))),s.default.createElement("div",{className:"container-fluid"},s.default.createElement("div",{className:"prompt"},s.default.createElement("div",{className:"prompt__heading"},s.default.createElement("div",{className:"prompt__app-icon"},s.default.createElement("img",{src:t,width:"50",height:"50",alt:""})),s.default.createElement("div",{className:"text"},s.default.createElement(h.default,{id:"authorize.title",defaultMessage:"**{appName}** would like to connect to your **Mattermost** user account",values:{appName:e.name}}))),s.default.createElement("p",null,s.default.createElement(h.default,{id:"authorize.app",defaultMessage:"The app **{appName}** would like the ability to access and modify your basic information.",values:{appName:e.name}})),s.default.createElement("h2",{className:"prompt__allow"},s.default.createElement(h.default,{id:"authorize.access",defaultMessage:"Allow **{appName}** access?",values:{appName:e.name}})),s.default.createElement("div",{className:"prompt__buttons"},s.default.createElement("button",{type:"submit",className:"btn btn-link authorize-btn",onClick:this.handleDeny},s.default.createElement(d.FormattedMessage,{id:"authorize.deny",defaultMessage:"Deny"})),s.default.createElement("button",{type:"submit",className:"btn btn-primary authorize-btn",onClick:this.handleAllow},s.default.createElement(d.FormattedMessage,{id:"authorize.allow",defaultMessage:"Allow"}))),a))}}]),t}(s.default.Component);t.default=w}}]);
//# sourceMappingURL=28.c36c610e09f8afaab5bc.js.map