(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1017:function(e,t,a){e.exports={default:a(1127),__esModule:!0}},1126:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(181)),r=m(a(794)),s=m(a(776)),l=m(a(185)),i=m(a(304)),o=m(a(832)),u=m(a(1017)),d=m(a(126)),c=m(a(295));t.rolesFromMapping=function(e,t){var a=JSON.parse((0,c.default)(t));return function(e){var t=function(){var e=[];return(0,r.default)(_).forEach(function(t){(0,r.default)(t).forEach(function(t){var a=t.map(function(e){return e.roleName});e=e.concat(a)})}),[].concat((0,l.default)(new i.default(e.map(function(e){return e}))))}();(0,d.default)(e).forEach(function(a){t.includes(a)||delete e[a]})}(a),(0,d.default)(_).forEach(function(t){var n=e[t];n&&function(e,t,a){var n=_[e][t];if(void 0===n)throw new Error("Value '"+t+"' not present in MAPPING for key '"+e+"'.");n.forEach(function(e){var t=a[e.roleName];e.shouldHave?function(e,t){t.permissions.includes(e)||t.permissions.push(e)}(e.permission,t):function(e,t){var a=t.permissions.indexOf(e);-1!==a&&t.permissions.splice(a,1)}(e.permission,t)})}(t,n,a)}),(0,u.default)(a).forEach(function(e){var n=(0,o.default)(e,2),r=n[0],s=n[1],u=new i.default(t[r].permissions),d=new i.default(s.permissions),c=[].concat((0,l.default)(d)).filter(function(e){return!u.has(e)});u.size===d.size&&0===c.length&&delete a[r]}),a},t.mappingValueFromRoles=function(e,t){var a=!0,n=!1,r=void 0;try{for(var l,i=(0,s.default)(v(_[e],t));!(a=(l=i.next()).done);a=!0){var o=l.value;if(o.allConditionsAreMet)return o.value}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}throw new Error("No matching mapping value found for key '"+e+"' with the given roles.")};var f=a(25);function m(e){return e&&e.__esModule?e:{default:e}}var p=n.default.mark(v),_={enableTeamCreation:{true:[{roleName:"system_user",permission:f.Permissions.CREATE_TEAM,shouldHave:!0}],false:[{roleName:"system_user",permission:f.Permissions.CREATE_TEAM,shouldHave:!1}]},editOthersPosts:{true:[{roleName:"system_admin",permission:f.Permissions.EDIT_OTHERS_POSTS,shouldHave:!0},{roleName:"team_admin",permission:f.Permissions.EDIT_OTHERS_POSTS,shouldHave:!0}],false:[{roleName:"team_admin",permission:f.Permissions.EDIT_OTHERS_POSTS,shouldHave:!1},{roleName:"system_admin",permission:f.Permissions.EDIT_OTHERS_POSTS,shouldHave:!1}]},enableOnlyAdminIntegrations:{true:[{roleName:"team_user",permission:f.Permissions.MANAGE_WEBHOOKS,shouldHave:!1},{roleName:"team_user",permission:f.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!1},{roleName:"system_user",permission:f.Permissions.MANAGE_OAUTH,shouldHave:!1}],false:[{roleName:"team_user",permission:f.Permissions.MANAGE_WEBHOOKS,shouldHave:!0},{roleName:"team_user",permission:f.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!0},{roleName:"system_user",permission:f.Permissions.MANAGE_OAUTH,shouldHave:!0}]}};function v(e,t){var a,r,s;return n.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:l.t0=n.default.keys(e);case 1:if((l.t1=l.t0()).done){l.next=10;break}if(a=l.t1.value,!e.hasOwnProperty(a)){l.next=8;break}return r=e[a],s=r.some(function(e){var a=t[e.roleName];return e.shouldHave&&!a.permissions.includes(e.permission)||!e.shouldHave&&a.permissions.includes(e.permission)}),l.next=8,{value:a,allConditionsAreMet:!s};case 8:l.next=1;break;case 10:case"end":return l.stop()}},p,this)}},1127:function(e,t,a){a(1128),e.exports=a(14).Object.entries},1128:function(e,t,a){var n=a(21),r=a(1036)(!0);n(n.S,"Object",{entries:function(e){return r(e)}})},2725:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(794)),r=a(286),s=a(2),l=a(287),i=a(805),o=a(850),u=a(96),d=a(294),c=a(289),f=a(770),m=p(a(2726));function p(e){return e&&e.__esModule?e:{default:e}}t.default=(0,l.withRouter)((0,r.connect)(function(e){var t=(0,u.getConfig)(e),a=(0,f.getCurrentUser)(e),r=(0,n.default)((0,c.getTeamMemberships)(e));return{currentUserRoles:a.roles||"",customDescriptionText:t.CustomDescriptionText,roles:(0,d.getRoles)(e),enableTeamCreation:"true"===t.EnableTeamCreation,isMemberOfTeam:r&&r.length>0,joinableTeams:(0,c.getSortedJoinableTeams)(e,a.locale),siteName:t.SiteName}},function(e){return{actions:(0,s.bindActionCreators)({getTeams:i.getTeams,loadRolesIfNeeded:o.loadRolesIfNeeded},e)}})(m.default))},2726:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(a(282)),r=k(a(281)),s=k(a(285)),l=k(a(283)),i=k(a(284)),o=k(a(1)),u=k(a(3)),d=a(766),c=a(287),f=a(25),m=a(773),p=a(826),_=a(1126),v=b(a(293)),h=b(a(765)),g=k(a(812)),E=k(a(864)),M=k(a(804)),T=k(a(785)),N=k(a(870)),y=k(a(894)),C=k(a(2727));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.loadPoliciesIntoState=function(e){var t="true"===(0,_.mappingValueFromRoles)("enableTeamCreation",e);a.setState({enableTeamCreation:t,loaded:!0})},a.handleTeamClick=function(e){a.setState({loadingTeamId:e.id}),(0,p.addUserToTeamFromInvite)("",e.invite_id,function(){a.props.history.push("/"+e.name+"/channels/town-square")},function(e){a.setState({error:e,loadingTeamId:""})})},a.handleLogoutClick=function(e){e.preventDefault(),(0,m.emitUserLoggedOutEvent)("/login")},a.clearError=function(e){e.preventDefault(),a.setState({error:null})},a.state={loadingTeamId:"",error:null},a}return(0,i.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.props.actions.getTeams(0,200)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.actions,a=e.roles;t.loadRolesIfNeeded([f.General.SYSTEM_ADMIN_ROLE,f.General.SYSTEM_USER_ROLE]),a.system_admin&&a.system_user&&this.loadPoliciesIntoState(a)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.state.loaded&&e.roles.system_admin&&e.roles.system_user&&this.loadPoliciesIntoState(e.roles)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserRoles,n=t.customDescriptionText,r=t.isMemberOfTeam,s=t.joinableTeams,l=t.siteName,i=this.state.enableTeamCreation,o=h.isSystemAdmin(a),m=void 0;if(this.state.loadingTeamId)m=u.default.createElement(T.default,null);else if(this.state.error)m=u.default.createElement("div",{className:"signup__content"},u.default.createElement("div",{className:"form-group has-error"},u.default.createElement("label",{className:"control-label"},this.state.error.message)));else{var p=[];s.forEach(function(t){p.push(u.default.createElement(C.default,{key:"team_"+t.name,team:t,onTeamClick:e.handleTeamClick,loading:e.state.loadingTeamId===t.id}))}),0===p.length&&(i||o)?p=u.default.createElement("div",{className:"signup-team-dir-err"},u.default.createElement("div",null,u.default.createElement(d.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))):0===p.length&&(p=u.default.createElement("div",{className:"signup-team-dir-err"},u.default.createElement("div",null,u.default.createElement(N.default,{permissions:[f.Permissions.CREATE_TEAM]},u.default.createElement(d.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."})),u.default.createElement(N.default,{permissions:[f.Permissions.CREATE_TEAM],invert:!0},u.default.createElement(d.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}))))),m=u.default.createElement("div",{className:"signup__content"},u.default.createElement("h4",null,u.default.createElement(d.FormattedMessage,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),u.default.createElement("div",{className:"signup-team-all"},p))}var _=null;o&&!i&&(_=u.default.createElement("div",null,u.default.createElement(d.FormattedMessage,{id:"login.createTeamAdminOnly",defaultMessage:"This option is only available for System Administrators, and does not show up for other users."})));var b=u.default.createElement(N.default,{permissions:[f.Permissions.CREATE_TEAM]},u.default.createElement("div",{className:"margin--extra"},u.default.createElement(c.Link,{to:"/create_team",className:"signup-team-login"},u.default.createElement(d.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a new team"}))),_),k=void 0;v.isMobileApp()||(k=u.default.createElement(N.default,{permissions:[f.Permissions.MANAGE_SYSTEM]},u.default.createElement("div",{className:"margin--extra hidden-xs"},u.default.createElement(c.Link,{to:"/admin_console",className:"signup-team-login"},u.default.createElement(d.FormattedMessage,{id:"signup_team_system_console",defaultMessage:"Go to System Console"})))));var P=void 0;return P=this.state.error?u.default.createElement(M.default,{onClick:this.clearError}):r?u.default.createElement(M.default,null):u.default.createElement("div",{className:"signup-header"},u.default.createElement("a",{href:"#",onClick:this.handleLogoutClick},u.default.createElement("span",{className:"fa fa-chevron-left",title:h.localizeMessage("generic_icons.logout","Logout Icon")}),u.default.createElement(d.FormattedMessage,{id:"web.header.logout",defaultMessage:"Logout"}))),u.default.createElement("div",null,u.default.createElement(E.default,null),P,u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"signup-team__container"},u.default.createElement("img",{className:"signup-team-logo",src:g.default}),u.default.createElement(y.default,{customDescriptionText:n,siteName:l}),m,b,k)))}}]),t}(u.default.Component);P.propTypes={currentUserRoles:o.default.string,customDescriptionText:o.default.string,isMemberOfTeam:o.default.bool.isRequired,joinableTeams:o.default.array,roles:o.default.object.isRequired,siteName:o.default.string,actions:o.default.shape({getTeams:o.default.func.isRequired,loadRolesIfNeeded:o.default.func.isRequired}).isRequired},t.default=P},2727:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(282)),r=m(a(281)),s=m(a(285)),l=m(a(283)),i=m(a(284)),o=m(a(1)),u=m(a(3)),d=a(769),c=m(a(2728)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765));function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){var e,a,s,i;(0,r.default)(this,t);for(var o=arguments.length,u=Array(o),d=0;d<o;d++)u[d]=arguments[d];return a=s=(0,l.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(u))),s.handleTeamClick=function(e){e.preventDefault(),s.props.onTeamClick(s.props.team)},i=a,(0,l.default)(s,i)}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=void 0;e=this.props.loading?u.default.createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon",title:f.localizeMessage("generic_icons.loading","Loading Icon")}):u.default.createElement("span",{className:"fa fa-angle-right right signup-team__icon",title:f.localizeMessage("select_team.join.icon","Join Team Icon")});var t="",a="";return this.props.team.description&&(t=u.default.createElement(d.Tooltip,{id:"team-description__tooltip"},this.props.team.description),a=u.default.createElement(d.OverlayTrigger,{trigger:["hover","focus","click"],delayShow:1e3,placement:"top",overlay:t,ref:"descriptionOverlay",rootClose:!0,container:this},u.default.createElement(c.default,{className:"icon icon--info"}))),u.default.createElement("div",{className:"signup-team-dir"},a,u.default.createElement("a",{href:"#",id:f.createSafeId(this.props.team.display_name),onClick:this.handleTeamClick},u.default.createElement("span",{className:"signup-team-dir__name"},this.props.team.display_name),e))}}]),t}(u.default.PureComponent);p.propTypes={team:o.default.object.isRequired,onTeamClick:o.default.func.isRequired,loading:o.default.bool.isRequired},t.default=p},2728:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(282)),r=d(a(281)),s=d(a(285)),l=d(a(283)),i=d(a(284)),o=d(a(3)),u=a(765);function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return o.default.createElement("span",this.props,o.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:f,role:"icon","aria-label":(0,u.localizeMessage)("generic_icons.info","Info Icon")},o.default.createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},o.default.createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"}))))}}]),t}(o.default.PureComponent);t.default=c;var f={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},804:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(282)),r=m(a(281)),s=m(a(285)),l=m(a(283)),i=m(a(284)),o=m(a(1)),u=m(a(3)),d=a(766),c=a(287),f=a(765);function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"signup-header"},u.default.createElement(c.Link,{onClick:this.props.onClick,to:this.props.url},u.default.createElement("span",{className:"fa fa-chevron-left",title:(0,f.localizeMessage)("generic_icons.back","Back Icon")}),u.default.createElement(d.FormattedMessage,{id:"web.header.back",defaultMessage:"Back"})))}}]),t}(u.default.PureComponent);p.propTypes={url:o.default.string,onClick:o.default.func},p.defaultProps={url:"/"},t.default=p},812:function(e,t,a){e.exports=a.p+"files/5d6be4015bde2a4e0358c8bc110deadc.png"},894:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(282)),r=c(a(281)),s=c(a(285)),l=c(a(283)),i=c(a(284)),o=c(a(1)),u=c(a(3)),d=a(766);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.customDescriptionText,a=e.siteName,n=null;return n=t||u.default.createElement(d.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),u.default.createElement(u.default.Fragment,null,u.default.createElement("h1",null,a),u.default.createElement("h4",{className:"color--light"},n))}}]),t}(u.default.PureComponent);f.propTypes={customDescriptionText:o.default.string,siteName:o.default.string},f.defaultProps={siteName:"Mattermost"},t.default=f}}]);
//# sourceMappingURL=27.58e5875d1b2403db0c7d.js.map