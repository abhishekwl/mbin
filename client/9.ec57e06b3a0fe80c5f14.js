(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1002:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(282)),r=f(a(281)),o=f(a(285)),s=f(a(283)),l=f(a(284)),i=f(a(1)),d=f(a(3)),u=a(287),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),m=f(a(785));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.updateFilter=a.updateFilter.bind(a),a.state={filter:""},a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"updateFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.state.filter.toLowerCase(),t=void 0;this.props.loading?t=d.default.createElement(m.default,null):0===(t=d.default.Children.map(this.props.children,function(t){return d.default.cloneElement(t,{filter:e})})).length&&this.props.emptyText&&(t=d.default.createElement("span",{className:"backstage-list__item backstage-list__empty"},this.props.emptyText));var a=null;return this.props.addLink&&this.props.addText&&(a=d.default.createElement(u.Link,{className:"add-link",to:this.props.addLink},d.default.createElement("button",{type:"button",className:"btn btn-primary"},d.default.createElement("span",null,this.props.addText)))),d.default.createElement("div",{className:"backstage-content"},d.default.createElement("div",{className:"backstage-header"},d.default.createElement("h1",null,this.props.header),a),d.default.createElement("div",{className:"backstage-filters"},d.default.createElement("div",{className:"backstage-filter__search"},d.default.createElement("i",{className:"fa fa-search",title:c.localizeMessage("generic_icons.search","Search Icon")}),d.default.createElement("input",{type:"search",className:"form-control",placeholder:this.props.searchPlaceholder,value:this.state.filter,onChange:this.updateFilter,style:g.search}))),d.default.createElement("span",{className:"backstage-list__help"},this.props.helpText),d.default.createElement("div",{className:"backstage-list"},t))}}]),t}(d.default.Component);p.propTypes={children:i.default.node,header:i.default.node.isRequired,addLink:i.default.string,addText:i.default.node,emptyText:i.default.node,helpText:i.default.node,loading:i.default.bool.isRequired,searchPlaceholder:i.default.string},p.defaultProps={searchPlaceholder:c.localizeMessage("backstage_list.search","Search")},t.default=p;var g={search:{flexGrow:0,flexShrink:0}}},1003:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(282)),r=f(a(281)),o=f(a(285)),s=f(a(283)),l=f(a(284)),i=f(a(1)),d=f(a(3)),u=a(766),c=f(a(1402)),m=a(765);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"triggerTitle",get:function(){return d.default.createElement(u.FormattedMessage,{id:"installed_integrations.delete",defaultMessage:"Delete"})}},{key:"modalTitle",get:function(){return d.default.createElement(u.FormattedMessage,{id:"integrations.delete.confirm.title",defaultMessage:"Delete Integration"})}},{key:"modalMessage",get:function(){return d.default.createElement("div",{className:"alert alert-warning"},d.default.createElement("i",{className:"fa fa-warning fa-margin--right",title:(0,m.localizeMessage)("generic_icons.warning","Warning Icon")}),d.default.createElement(u.FormattedMessage,{id:this.props.messageId,defaultMessage:"This action permanently deletes the integration and breaks any integrations using it. Are you sure you want to delete it?"}))}},{key:"modalConfirmButton",get:function(){return d.default.createElement(u.FormattedMessage,{id:"integrations.delete.confirm.button",defaultMessage:"Delete"})}}]),t}(c.default);t.default=p,p.propTypes={messageId:i.default.string.isRequired,onDelete:i.default.func.isRequired}},1402:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(282)),r=f(a(281)),o=f(a(285)),s=f(a(283)),l=f(a(284)),i=f(a(1)),d=f(a(3)),u=f(a(22)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),m=f(a(806));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));if(a.handleOpenModal=function(e){e.preventDefault(),a.setState({showDeleteModal:!0})},a.handleConfirm=function(){a.props.onDelete()},a.handleCancel=function(){a.setState({showDeleteModal:!1})},a.handleKeyDown=function(e){c.isKeyPressed(e,u.default.KeyCodes.ENTER)&&a.handleConfirm(e)},a.constructor===t)throw new TypeError("Can not construct abstract class.");return a.state={showDeleteModal:!1},a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return d.default.createElement("span",null,d.default.createElement("button",{className:"color--link style--none",onClick:this.handleOpenModal},this.triggerTitle),d.default.createElement(m.default,{show:this.state.showDeleteModal,title:this.modalTitle,message:this.modalMessage,confirmButtonText:this.modalConfirmButton,onConfirm:this.handleConfirm,onCancel:this.handleCancel,onKeyDown:this.handleKeyDown}))}}]),t}(d.default.PureComponent);p.propTypes={onDelete:i.default.func.isRequired},t.default=p},1403:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(282)),r=h(a(281)),o=h(a(285)),s=h(a(283)),l=h(a(284)),i=h(a(1)),d=h(a(3)),u=a(766),c=a(287),m=h(a(916)),f=h(a(1404)),p=h(a(811)),g=h(a(951));function h(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.getStateFromHook=function(e){return{displayName:e.display_name||"",description:e.description||"",channelId:e.channel_id||"",channelLocked:e.channel_locked||!1,username:e.username||"",iconURL:e.icon_url||"",saving:!1,serverError:"",clientError:null}},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.saving)if(a.setState({saving:!0,serverError:"",clientError:""}),a.state.channelId){var t={channel_id:a.state.channelId,channel_locked:a.state.channelLocked,display_name:a.state.displayName,description:a.state.description,username:a.state.username,icon_url:a.state.iconURL};a.props.action(t).then(function(){return a.setState({saving:!1})})}else a.setState({saving:!1,clientError:d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.channelRequired",defaultMessage:"A valid channel is required"})})},a.updateDisplayName=function(e){a.setState({displayName:e.target.value})},a.updateDescription=function(e){a.setState({description:e.target.value})},a.updateChannelId=function(e){a.setState({channelId:e.target.value})},a.updateChannelLocked=function(e){a.setState({channelLocked:e.target.checked})},a.updateUsername=function(e){a.setState({username:e.target.value})},a.updateIconURL=function(e){a.setState({iconURL:e.target.value})},a.state=a.getStateFromHook(a.props.initialHook||{}),a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props.header,t=this.props.footer;return d.default.createElement("div",{className:"backstage-content"},d.default.createElement(m.default,null,d.default.createElement(c.Link,{to:"/"+this.props.team.name+"/integrations/incoming_webhooks"},d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"})),d.default.createElement(u.FormattedMessage,{id:e.id,defaultMessage:e.defaultMessage})),d.default.createElement("div",{className:"backstage-form"},d.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.displayName",defaultMessage:"Title"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.displayName.help",defaultMessage:"Choose a title to be displayed on the webhook settings page. Maximum 64 characters."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.description",defaultMessage:"Description"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"description",type:"text",maxLength:"500",className:"form-control",value:this.state.description,onChange:this.updateDescription}),d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.description.help",defaultMessage:"Description for your incoming webhook."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelId"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.channel",defaultMessage:"Channel"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement(f.default,{id:"channelId",value:this.state.channelId,onChange:this.updateChannelId,selectOpen:!0,selectPrivate:!0}),d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.channel.help",defaultMessage:"The default public or private channel that receives the webhook payloads. You must belong to the private channel when setting up the webhook."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelLocked"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.channelLocked",defaultMessage:"Lock to this channel"})),d.default.createElement("div",{className:"col-md-5 col-sm-8 checkbox"},d.default.createElement("input",{id:"channelLocked",type:"checkbox",checked:this.state.channelLocked,onChange:this.updateChannelLocked}),d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.channelLocked.help",defaultMessage:"If set, the incoming webhook can only post to the channel selected above."})))),this.props.enablePostUsernameOverride&&d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.username",defaultMessage:"Username"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"username",type:"text",maxLength:"22",className:"form-control",value:this.state.username,onChange:this.updateUsername}),d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.username.help",defaultMessage:'Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols "-", "_", and ".".'})))),this.props.enablePostIconOverride&&d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconURL"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.icon_url",defaultMessage:"Profile Picture"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"iconURL",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconURL,onChange:this.updateIconURL}),d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.icon_url.help",defaultMessage:"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),d.default.createElement("div",{className:"backstage-form__footer"},d.default.createElement(p.default,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),d.default.createElement(c.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/incoming_webhooks"},d.default.createElement(u.FormattedMessage,{id:"add_incoming_webhook.cancel",defaultMessage:"Cancel"})),d.default.createElement(g.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},d.default.createElement(u.FormattedMessage,{id:t.id,defaultMessage:t.defaultMessage}))))))}}]),t}(d.default.Component);_.propTypes={team:i.default.object.isRequired,header:i.default.object.isRequired,footer:i.default.object.isRequired,serverError:i.default.string.isRequired,initialHook:i.default.object,enablePostUsernameOverride:i.default.bool.isRequired,enablePostIconOverride:i.default.bool.isRequired,action:i.default.func.isRequired},t.default=_},1404:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(282)),r=p(a(281)),o=p(a(283)),s=p(a(285)),l=p(a(284)),i=p(a(1)),d=p(a(3)),u=p(a(788)),c=a(825),m=p(a(22)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleChannelChange=a.handleChannelChange.bind(a),a.filterChannels=a.filterChannels.bind(a),a.state={channels:u.default.getAll().filter(a.filterChannels).sort(c.sortChannelsByDisplayName)},a}return(0,l.default)(t,e),(0,s.default)(t,null,[{key:"propTypes",get:function(){return{onChange:i.default.func,value:i.default.string,selectOpen:i.default.bool.isRequired,selectPrivate:i.default.bool.isRequired,selectDm:i.default.bool.isRequired}}},{key:"defaultProps",get:function(){return{selectOpen:!1,selectPrivate:!1,selectDm:!1}}}]),(0,s.default)(t,[{key:"componentDidMount",value:function(){u.default.addChangeListener(this.handleChannelChange)}},{key:"componentWillUnmount",value:function(){u.default.removeChangeListener(this.handleChannelChange)}},{key:"handleChannelChange",value:function(){this.setState({channels:u.default.getAll().filter(this.filterChannels).sort(c.sortChannelsByDisplayName)})}},{key:"filterChannels",value:function(e){return!!e.display_name}},{key:"render",value:function(){var e=this,t=[d.default.createElement("option",{key:"",value:""},f.localizeMessage("channel_select.placeholder","--- Select a channel ---"))];return this.state.channels.forEach(function(a){a.type===m.default.OPEN_CHANNEL&&e.props.selectOpen?t.push(d.default.createElement("option",{key:a.id,value:a.id},a.display_name)):a.type===m.default.PRIVATE_CHANNEL&&e.props.selectPrivate?t.push(d.default.createElement("option",{key:a.id,value:a.id},a.display_name)):a.type===m.default.DM_CHANNEL&&e.props.selectDm&&t.push(d.default.createElement("option",{key:a.id,value:a.id},a.display_name))}),d.default.createElement("select",{className:"form-control",value:this.props.value,onChange:this.props.onChange},t)}}]),t}(d.default.Component);t.default=g},1405:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a(776)),r=b(a(282)),o=b(a(281)),s=b(a(285)),l=b(a(283)),i=b(a(284)),d=b(a(1)),u=b(a(3)),c=a(766),m=a(287),f=b(a(782)),p=a(765),g=b(a(916)),h=b(a(1404)),_=b(a(811)),v=b(a(951));function b(e){return e&&e.__esModule?e:{default:e}}var E=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.getStateFromHook=function(e){var t="";if(e.trigger_words){var a=0;for(a=0;a<e.trigger_words.length;a++)t+=e.trigger_words[a]+"\n"}var n="";if(e.callback_urls){var r=0;for(r=0;r<e.callback_urls.length;r++)n+=e.callback_urls[r]+"\n"}return{displayName:e.display_name||"",description:e.description||"",contentType:e.content_type||"application/x-www-form-urlencoded",channelId:e.channel_id||"",triggerWords:t,triggerWhen:e.trigger_when||0,callbackUrls:n,saving:!1,clientError:null,username:e.username||"",iconURL:e.icon_url||""}},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.saving){a.setState({saving:!0,clientError:""});var t=[];if(a.state.triggerWords){var r=!0,o=!1,s=void 0;try{for(var l,i=(0,n.default)(a.state.triggerWords.split("\n"));!(r=(l=i.next()).done);r=!0){var d=l.value;(d=d.trim()).length>0&&t.push(d)}}catch(e){o=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw s}}}if(a.state.channelId||0!==t.length){var m=[],p=!0,g=!1,h=void 0;try{for(var _,v=(0,n.default)(a.state.callbackUrls.split("\n"));!(p=(_=v.next()).done);p=!0){var b=_.value;(b=b.trim()).length>0&&m.push(b)}}catch(e){g=!0,h=e}finally{try{!p&&v.return&&v.return()}finally{if(g)throw h}}if(0!==m.length){var E={team_id:f.default.getCurrentId(),channel_id:a.state.channelId,trigger_words:t,trigger_when:parseInt(a.state.triggerWhen,10),callback_urls:m,display_name:a.state.displayName,content_type:a.state.contentType,description:a.state.description,username:a.state.username,icon_url:a.state.iconURL};a.props.action(E).then(function(){return a.setState({saving:!1})})}else a.setState({saving:!1,clientError:u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.callbackUrlsRequired",defaultMessage:"One or more callback URLs are required"})})}else a.setState({saving:!1,clientError:u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsOrChannelRequired",defaultMessage:"A valid channel or a list of trigger words is required"})})}},a.updateDisplayName=function(e){a.setState({displayName:e.target.value})},a.updateDescription=function(e){a.setState({description:e.target.value})},a.updateContentType=function(e){a.setState({contentType:e.target.value})},a.updateChannelId=function(e){a.setState({channelId:e.target.value})},a.updateTriggerWords=function(e){a.setState({triggerWords:e.target.value})},a.updateTriggerWhen=function(e){a.setState({triggerWhen:e.target.value})},a.updateCallbackUrls=function(e){a.setState({callbackUrls:e.target.value})},a.updateUsername=function(e){a.setState({username:e.target.value})},a.updateIconURL=function(e){a.setState({iconURL:e.target.value})},a.state=a.getStateFromHook(a.props.initialHook||{}),a}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props.header,t=this.props.footer,a=this.props.renderExtra;return u.default.createElement("div",{className:"backstage-content"},u.default.createElement(g.default,null,u.default.createElement(m.Link,{to:"/"+this.props.team.name+"/integrations/outgoing_webhooks"},u.default.createElement(c.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Outgoing Webhooks"})),u.default.createElement(c.FormattedMessage,{id:e.id,defaultMessage:e.defaultMessage})),u.default.createElement("div",{className:"backstage-form"},u.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.displayName",defaultMessage:"Title"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.displayName.help",defaultMessage:"Choose a title to be displayed on the webhook settings page. Maximum 64 characters."})))),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.description",defaultMessage:"Description"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("input",{id:"description",type:"text",maxLength:"500",className:"form-control",value:this.state.description,onChange:this.updateDescription}),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.description.help",defaultMessage:"Description for your incoming webhook."})))),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"contentType"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.content_Type",defaultMessage:"Content Type"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("select",{className:"form-control",value:this.state.contentType,onChange:this.updateContentType},u.default.createElement("option",{value:"application/x-www-form-urlencoded"},"application/x-www-form-urlencoded"),u.default.createElement("option",{value:"application/json"},"application/json")),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.contentType.help1",defaultMessage:"Choose the content type by which the request will be sent."})),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.contentType.help2",defaultMessage:"If application/x-www-form-urlencoded is chosen, the server will encode the parameters in a URL format in the request body."})),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.contentType.help3",defaultMessage:"If application/json is chosen, the server will format the request body as JSON."})))),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelId"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.channel",defaultMessage:"Channel"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement(h.default,{id:"channelId",value:this.state.channelId,onChange:this.updateChannelId,selectOpen:!0}),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.channel.help",defaultMessage:"Public channel that delivers payload to webhook. Optional if at least one Trigger Word is specified."})))),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"triggerWords"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.triggerWords",defaultMessage:"Trigger Words (One Per Line)"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("textarea",{id:"triggerWords",rows:"3",maxLength:"1000",className:"form-control",value:this.state.triggerWords,onChange:this.updateTriggerWords}),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.triggerWords.help",defaultMessage:"Messages that start with one of the specified words will trigger the outgoing webhook. Optional if Channel is selected."})))),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"triggerWords"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhen",defaultMessage:"Trigger When"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("select",{className:"form-control",value:this.state.triggerWhen,onChange:this.updateTriggerWhen},u.default.createElement("option",{value:"0"},(0,p.localizeMessage)("add_outgoing_webhook.triggerWordsTriggerWhenFullWord","First word matches a trigger word exactly")),u.default.createElement("option",{value:"1"},(0,p.localizeMessage)("add_outgoing_webhook.triggerWordsTriggerWhenStartsWith","First word starts with a trigger word"))),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhen.help",defaultMessage:"Choose when to trigger the outgoing webhook; if the first word of a message matches a Trigger Word exactly, or if it starts with a Trigger Word."})))),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"callbackUrls"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.callbackUrls",defaultMessage:"Callback URLs (One Per Line)"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("textarea",{id:"callbackUrls",rows:"3",maxLength:"1000",className:"form-control",value:this.state.callbackUrls,onChange:this.updateCallbackUrls}),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.callbackUrls.help",defaultMessage:"The URL that messages will be sent to. If the URL is private, add it as a {link}.",values:{link:u.default.createElement("a",{href:"https://about.mattermost.com/default-allow-internal-connections-settings-documentation/",target:"_blank",rel:"noopener noreferrer"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.callbackUrls.helpLinkText",defaultMessage:"trusted internal connection"}))}})))),this.props.enablePostUsernameOverride&&u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.username",defaultMessage:"Username"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("input",{id:"username",type:"text",maxLength:"22",className:"form-control",value:this.state.username,onChange:this.updateUsername}),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.username.help",defaultMessage:'Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols "-", "_", and ".".'})))),this.props.enablePostIconOverride&&u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconURL"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.icon_url",defaultMessage:"Profile Picture"})),u.default.createElement("div",{className:"col-md-5 col-sm-8"},u.default.createElement("input",{id:"iconURL",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconURL,onChange:this.updateIconURL}),u.default.createElement("div",{className:"form__help"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.icon_url.help",defaultMessage:"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),u.default.createElement("div",{className:"backstage-form__footer"},u.default.createElement(_.default,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),u.default.createElement(m.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/outgoing_webhooks"},u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.cancel",defaultMessage:"Cancel"})),u.default.createElement(v.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},u.default.createElement(c.FormattedMessage,{id:t.id,defaultMessage:t.defaultMessage})),a))))}}]),t}(u.default.Component);E.propTypes={team:d.default.object.isRequired,header:d.default.object.isRequired,footer:d.default.object.isRequired,renderExtra:d.default.node.isRequired,serverError:d.default.string.isRequired,initialHook:d.default.object,action:d.default.func.isRequired,enablePostUsernameOverride:d.default.bool.isRequired,enablePostIconOverride:d.default.bool.isRequired},t.default=E},1406:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(776)),r=v(a(282)),o=v(a(281)),s=v(a(285)),l=v(a(283)),i=v(a(284)),d=v(a(3)),u=v(a(1)),c=a(766),m=a(287),f=a(25),p=v(a(916)),g=v(a(811)),h=v(a(951)),_=v(a(870));function v(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.getStateFromApp=function(e){return{name:e.name||"",description:e.description||"",homepage:e.homepage||"",icon_url:e.icon_url||"",callbackUrls:e.callback_urls?e.callback_urls.join("\n"):"",is_trusted:e.is_trusted||!1,has_icon:Boolean(e.icon_url),saving:!1,clientError:null}},a.imageLoaded=function(){a.setState({has_icon:!0,icon_url:a.refs.icon_url.value})},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.saving)if(a.setState({saving:!0,clientError:""}),a.state.name)if(a.state.description)if(a.state.homepage){var t=[],r=!0,o=!1,s=void 0;try{for(var l,i=(0,n.default)(a.state.callbackUrls.split("\n"));!(r=(l=i.next()).done);r=!0){var u=l.value;(u=u.trim()).length>0&&t.push(u)}}catch(e){o=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw s}}if(0!==t.length){var m={name:a.state.name,callback_urls:t,homepage:a.state.homepage,description:a.state.description,is_trusted:a.state.is_trusted,icon_url:a.state.icon_url};a.props.action(m).then(function(){return a.setState({saving:!1})})}else a.setState({saving:!1,clientError:d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.callbackUrlsRequired",defaultMessage:"One or more callback URLs are required."})})}else a.setState({saving:!1,clientError:d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.homepageRequired",defaultMessage:"Homepage for the OAuth 2.0 application is required."})});else a.setState({saving:!1,clientError:d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.descriptionRequired",defaultMessage:"Description for the OAuth 2.0 application is required."})});else a.setState({saving:!1,clientError:d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.nameRequired",defaultMessage:"Name for the OAuth 2.0 application is required."})})},a.updateName=function(e){a.setState({name:e.target.value})},a.updateTrusted=function(e){a.setState({is_trusted:"true"===e.target.value})},a.updateDescription=function(e){a.setState({description:e.target.value})},a.updateHomepage=function(e){a.setState({homepage:e.target.value})},a.updateIconUrl=function(e){a.setState({has_icon:!1,icon_url:e.target.value}),a.image.src=e.target.value},a.updateCallbackUrls=function(e){a.setState({callbackUrls:e.target.value})},a.image=new Image,a.image.onload=a.imageLoaded,a.state=a.getStateFromApp(a.props.initialApp||{}),a}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props.header,t=this.props.footer,a=this.props.renderExtra,n=void 0;this.state.has_icon&&(n=d.default.createElement("div",{className:"integration__icon"},d.default.createElement("img",{src:this.state.icon_url})));var r=d.default.createElement(_.default,{permissions:[f.Permissions.MANAGE_SYSTEM]},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"is_trusted"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.trusted",defaultMessage:"Is Trusted"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("label",{className:"radio-inline"},d.default.createElement("input",{type:"radio",value:"true",name:"is_trusted",checked:this.state.is_trusted,onChange:this.updateTrusted}),d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.trusted.yes",defaultMessage:"Yes"})),d.default.createElement("label",{className:"radio-inline"},d.default.createElement("input",{type:"radio",value:"false",name:"is_trusted",checked:!this.state.is_trusted,onChange:this.updateTrusted}),d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.trusted.no",defaultMessage:"No"})),d.default.createElement("div",{className:"form__help"},d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.trusted.help",defaultMessage:"When true, the OAuth 2.0 application is considered trusted by the Mattermost server and doesn't require the user to accept authorization. When false, an additional window will appear, asking the user to accept or deny the authorization."})))));return d.default.createElement("div",{className:"backstage-content"},d.default.createElement(p.default,null,d.default.createElement(m.Link,{to:"/"+this.props.team.name+"/integrations/oauth2-apps"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.header",defaultMessage:"Installed OAuth2 Apps"})),d.default.createElement(c.FormattedMessage,{id:e.id,defaultMessage:e.defaultMessage})),d.default.createElement("div",{className:"backstage-form"},n,d.default.createElement("form",{className:"form-horizontal"},r,d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"name"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.name",defaultMessage:"Display Name"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"name",type:"text",maxLength:"64",className:"form-control",value:this.state.name,onChange:this.updateName}),d.default.createElement("div",{className:"form__help"},d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.name.help",defaultMessage:"Display name for your OAuth 2.0 application made of up to 64 characters."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.description",defaultMessage:"Description"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"description",type:"text",maxLength:"512",className:"form-control",value:this.state.description,onChange:this.updateDescription}),d.default.createElement("div",{className:"form__help"},d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.description.help",defaultMessage:"Description for your OAuth 2.0 application."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"homepage"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.homepage",defaultMessage:"Homepage"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"homepage",type:"url",maxLength:"256",className:"form-control",value:this.state.homepage,onChange:this.updateHomepage}),d.default.createElement("div",{className:"form__help"},d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.homepage.help",defaultMessage:"The URL for the homepage of the OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL depending on your server configuration."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"icon_url"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.iconUrl",defaultMessage:"Icon URL"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"icon_url",ref:"icon_url",type:"url",maxLength:"512",className:"form-control",value:this.state.icon_url,onChange:this.updateIconUrl}),d.default.createElement("div",{className:"form__help"},d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.icon.help",defaultMessage:"The URL for the homepage of the OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL depending on your server configuration."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"callbackUrls"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.callbackUrls",defaultMessage:"Callback URLs (One Per Line)"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("textarea",{id:"callbackUrls",rows:"3",maxLength:"1024",className:"form-control",value:this.state.callbackUrls,onChange:this.updateCallbackUrls}),d.default.createElement("div",{className:"form__help"},d.default.createElement(c.FormattedMessage,{id:"add_oauth_app.callbackUrls.help",defaultMessage:"The redirect URIs to which the service will redirect users after accepting or denying authorization of your application, and which will handle authorization codes or access tokens. Must be a valid URL and start with http:// or https://."})))),d.default.createElement("div",{className:"backstage-form__footer"},d.default.createElement(g.default,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),d.default.createElement(m.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/oauth2-apps"},d.default.createElement(c.FormattedMessage,{id:"installed_oauth_apps.cancel",defaultMessage:"Cancel"})),d.default.createElement(h.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},d.default.createElement(c.FormattedMessage,{id:t.id,defaultMessage:t.defaultMessage})),a))))}}]),t}(d.default.PureComponent);b.propTypes={team:u.default.object.isRequired,header:u.default.object.isRequired,footer:u.default.object.isRequired,renderExtra:u.default.node.isRequired,serverError:u.default.string.isRequired,initialApp:u.default.object,action:u.default.func.isRequired},t.default=b},1407:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(282)),r=_(a(281)),o=_(a(285)),s=_(a(283)),l=_(a(284)),i=_(a(3)),d=_(a(1)),u=a(766),c=a(287),m=_(a(916)),f=_(a(22)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),g=_(a(811)),h=_(a(951));function _(e){return e&&e.__esModule?e:{default:e}}var v="P",b=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.getStateFromCommand=function(e){return{displayName:e.display_name||"",description:e.description||"",trigger:e.trigger||"",url:e.url||"",method:e.method||v,username:e.username||"",iconUrl:e.icon_url||"",autocomplete:e.auto_complete||!1,autocompleteHint:e.auto_complete_hint||"",autocompleteDescription:e.auto_complete_desc||"",saving:!1,clientError:null}},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.saving){a.setState({saving:!0,clientError:""});var t=a.state.trigger.trim().toLowerCase();0===t.indexOf("/")&&(t=t.substr(1));var n={display_name:a.state.displayName,description:a.state.description,trigger:t,url:a.state.url.trim(),method:a.state.method,username:a.state.username,icon_url:a.state.iconUrl,auto_complete:a.state.autocomplete,team_id:a.props.team.id};n.auto_complete&&(n.auto_complete_desc=a.state.autocompleteDescription,n.auto_complete_hint=a.state.autocompleteHint),n.trigger?0!==n.trigger.indexOf("/")?-1===n.trigger.indexOf(" ")?n.trigger.length<f.default.MIN_TRIGGER_LENGTH||n.trigger.length>f.default.MAX_TRIGGER_LENGTH?a.setState({saving:!1,clientError:i.default.createElement(u.FormattedMessage,{id:"add_command.triggerInvalidLength",defaultMessage:"A trigger word must contain between {min} and {max} characters",values:{min:f.default.MIN_TRIGGER_LENGTH,max:f.default.MAX_TRIGGER_LENGTH}})}):n.url?a.props.action(n).then(function(){return a.setState({saving:!1})}):a.setState({saving:!1,clientError:i.default.createElement(u.FormattedMessage,{id:"add_command.urlRequired",defaultMessage:"A request URL is required"})}):a.setState({saving:!1,clientError:i.default.createElement(u.FormattedMessage,{id:"add_command.triggerInvalidSpace",defaultMessage:"A trigger word must not contain spaces"})}):a.setState({saving:!1,clientError:i.default.createElement(u.FormattedMessage,{id:"add_command.triggerInvalidSlash",defaultMessage:"A trigger word cannot begin with a /"})}):a.setState({saving:!1,clientError:i.default.createElement(u.FormattedMessage,{id:"add_command.triggerRequired",defaultMessage:"A trigger word is required"})})}},a.updateDisplayName=function(e){a.setState({displayName:e.target.value})},a.updateDescription=function(e){a.setState({description:e.target.value})},a.updateTrigger=function(e){a.setState({trigger:e.target.value})},a.updateUrl=function(e){a.setState({url:e.target.value})},a.updateMethod=function(e){a.setState({method:e.target.value})},a.updateUsername=function(e){a.setState({username:e.target.value})},a.updateIconUrl=function(e){a.setState({iconUrl:e.target.value})},a.updateAutocomplete=function(e){a.setState({autocomplete:e.target.checked})},a.updateAutocompleteHint=function(e){a.setState({autocompleteHint:e.target.value})},a.updateAutocompleteDescription=function(e){a.setState({autocompleteDescription:e.target.value})},a.state=a.getStateFromCommand(a.props.initialCommand||{}),a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=null,t=null;return this.state.autocomplete&&(e=i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteHint"},i.default.createElement(u.FormattedMessage,{id:"add_command.autocompleteHint",defaultMessage:"Autocomplete Hint"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"autocompleteHint",type:"text",maxLength:"1024",className:"form-control",value:this.state.autocompleteHint,onChange:this.updateAutocompleteHint,placeholder:p.localizeMessage("add_command.autocompleteHint.placeholder","Example: [Patient Name]")}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.autocompleteHint.help",defaultMessage:"(Optional) Arguments associated with your slash command, displayed as help in the autocomplete list."})))),t=i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteDescription"},i.default.createElement(u.FormattedMessage,{id:"add_command.autocompleteDescription",defaultMessage:"Autocomplete Description"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.autocompleteDescription,onChange:this.updateAutocompleteDescription,placeholder:p.localizeMessage("add_command.autocompleteDescription.placeholder",'Example: "Returns search results for patient records"')}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.autocompleteDescription.help",defaultMessage:"(Optional) Short description of slash command for the autocomplete list."}))))),i.default.createElement("div",{className:"backstage-content row"},i.default.createElement(m.default,null,i.default.createElement(c.Link,{to:"/"+this.props.team.name+"/integrations/commands"},i.default.createElement(u.FormattedMessage,{id:"installed_command.header",defaultMessage:"Slash Commands"})),i.default.createElement(u.FormattedMessage,{id:this.props.header.id,defaultMessage:this.props.header.defaultMessage})),i.default.createElement("div",{className:"backstage-form"},i.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},i.default.createElement(u.FormattedMessage,{id:"add_command.displayName",defaultMessage:"Title"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.displayName.help",defaultMessage:"Choose a title to be displayed on the slash command settings page. Maximum 64 characters."})))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},i.default.createElement(u.FormattedMessage,{id:"add_command.description",defaultMessage:"Description"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.description,onChange:this.updateDescription}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.description.help",defaultMessage:"Description for your incoming webhook."})))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"trigger"},i.default.createElement(u.FormattedMessage,{id:"add_command.trigger",defaultMessage:"Command Trigger Word"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"trigger",type:"text",maxLength:f.default.MAX_TRIGGER_LENGTH,className:"form-control",value:this.state.trigger,onChange:this.updateTrigger,placeholder:p.localizeMessage("add_command.trigger.placeholder",'Command trigger e.g. "hello" not including the slash')}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.trigger.help",defaultMessage:"Trigger word must be unique, and cannot begin with a slash or contain any spaces."})),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.trigger.helpExamples",defaultMessage:"Examples: client, employee, patient, weather"})),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.trigger.helpReserved",defaultMessage:"Reserved: {link}",values:{link:i.default.createElement("a",{href:"https://docs.mattermost.com/help/messaging/executing-commands.html#built-in-commands",target:"_blank",rel:"noopener noreferrer"},i.default.createElement(u.FormattedMessage,{id:"add_command.trigger.helpReservedLinkText",defaultMessage:"see list of built-in slash commands"}))}})))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"url"},i.default.createElement(u.FormattedMessage,{id:"add_command.url",defaultMessage:"Request URL"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"url",type:"text",maxLength:"1024",className:"form-control",value:this.state.url,onChange:this.updateUrl,placeholder:p.localizeMessage("add_command.url.placeholder","Must start with http:// or https://")}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.url.help",defaultMessage:"The callback URL to receive the HTTP POST or GET event request when the slash command is run."})))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"method"},i.default.createElement(u.FormattedMessage,{id:"add_command.method",defaultMessage:"Request Method"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("select",{id:"method",className:"form-control",value:this.state.method,onChange:this.updateMethod},i.default.createElement("option",{value:v},p.localizeMessage("add_command.method.post","POST")),i.default.createElement("option",{value:"G"},p.localizeMessage("add_command.method.get","GET"))),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.method.help",defaultMessage:"The type of command request issued to the Request URL."})))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},i.default.createElement(u.FormattedMessage,{id:"add_command.username",defaultMessage:"Response Username"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"username",type:"text",maxLength:"64",className:"form-control",value:this.state.username,onChange:this.updateUsername,placeholder:p.localizeMessage("add_command.username.placeholder","Username")}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.username.help",defaultMessage:'(Optional) Choose a username override for responses for this slash command. Usernames can consist of up to 22 characters consisting of lowercase letters, numbers and they symbols "-", "_", and "." .'})))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconUrl"},i.default.createElement(u.FormattedMessage,{id:"add_command.iconUrl",defaultMessage:"Response Icon"})),i.default.createElement("div",{className:"col-md-5 col-sm-8"},i.default.createElement("input",{id:"iconUrl",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconUrl,onChange:this.updateIconUrl,placeholder:p.localizeMessage("add_command.iconUrl.placeholder","https://www.example.com/myicon.png")}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.iconUrl.help",defaultMessage:"(Optional) Choose a profile picture override for the post responses to this slash command. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocomplete"},i.default.createElement(u.FormattedMessage,{id:"add_command.autocomplete",defaultMessage:"Autocomplete"})),i.default.createElement("div",{className:"col-md-5 col-sm-8 checkbox"},i.default.createElement("input",{id:"autocomplete",type:"checkbox",checked:this.state.autocomplete,onChange:this.updateAutocomplete}),i.default.createElement("div",{className:"form__help"},i.default.createElement(u.FormattedMessage,{id:"add_command.autocomplete.help",defaultMessage:"(Optional) Show slash command in autocomplete list."})))),e,t,i.default.createElement("div",{className:"backstage-form__footer"},i.default.createElement(g.default,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),i.default.createElement(c.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/commands"},i.default.createElement(u.FormattedMessage,{id:"add_command.cancel",defaultMessage:"Cancel"})),i.default.createElement(h.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},i.default.createElement(u.FormattedMessage,{id:this.props.footer.id,defaultMessage:this.props.footer.defaultMessage})),this.props.renderExtra))))}}]),t}(i.default.PureComponent);b.propTypes={team:d.default.object.isRequired,header:d.default.object.isRequired,footer:d.default.object.isRequired,renderExtra:d.default.node.isRequired,serverError:d.default.string.isRequired,initialCommand:d.default.object,action:d.default.func.isRequired},t.default=b},1408:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(917),o=function(e){return e&&e.__esModule?e:{default:e}}(a(2277));t.default=(0,n.connect)(function(e){return{commands:(0,r.getCommands)(e),oauthApps:(0,r.getOAuthApps)(e),incomingHooks:(0,r.getIncomingHooks)(e),outgoingHooks:(0,r.getOutgoingHooks)(e)}})(o.default)},2230:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(776)),r=a(286),o=a(287),s=a(770),l=a(289),i=a(96),d=a(294),u=a(25),c=m(a(2231));function m(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.withRouter)((0,r.connect)(function(e){var t=(0,s.getCurrentUser)(e),a=(0,l.getCurrentTeam)(e),r=(0,i.getConfig)(e),o=r.SiteName,c="true"===r.EnableCustomEmoji,m="true"===r.EnableIncomingWebhooks,f="true"===r.EnableOutgoingWebhooks,p="true"===r.EnableCommands,g="true"===r.EnableOAuthServiceProvider,h=(0,d.haveISystemPermission)(e,{permission:u.Permissions.MANAGE_EMOJIS});if(!h){var _=!0,v=!1,b=void 0;try{for(var E,k=(0,n.default)((0,l.getMyTeams)(e));!(_=(E=k.next()).done);_=!0){var M=E.value;if((0,d.haveITeamPermission)(e,{team:M.id,permission:u.Permissions.MANAGE_EMOJIS})){h=!0;break}}}catch(e){v=!0,b=e}finally{try{!_&&k.return&&k.return()}finally{if(v)throw b}}}return{user:t,team:a,siteName:o,enableCustomEmoji:c,enableIncomingWebhooks:m,enableOutgoingWebhooks:f,enableCommands:p,enableOAuthServiceProvider:g,canCreateCustomEmoji:h}})(c.default))},2231:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=P(a(282)),r=P(a(281)),o=P(a(285)),s=P(a(283)),l=P(a(284)),i=P(a(42)),d=P(a(801)),u=P(a(3)),c=P(a(1)),m=a(287),f=P(a(844)),p=P(a(864)),g=P(a(1069)),h=P(a(2232)),_=P(a(2239)),v=P(a(2246)),b=P(a(2247)),E=P(a(2250)),k=P(a(2252)),M=P(a(2254)),y=P(a(2257)),N=P(a(2259)),C=P(a(2261)),w=P(a(2264)),O=P(a(2266)),A=P(a(2268)),S=P(a(1408)),R=P(a(2278)),j=P(a(2281));function P(e){return e&&e.__esModule?e:{default:e}}var F=function(e){var t=e.component,a=e.extraProps,n=(0,d.default)(e,["component","extraProps"]);return u.default.createElement(m.Route,(0,i.default)({},n,{render:function(e){return u.default.createElement(t,(0,i.default)({},a,e))}}))},T=function(e){function t(){var e,a,o,l;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),u=0;u<i;u++)d[u]=arguments[u];return a=o=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),o.scrollToTop=function(){o.listRef&&(o.listRef.scrollTop=0)},o.setListRef=function(e){o.listRef=e},l=a,(0,s.default)(o,l)}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){if(null==this.props.team||null==this.props.user)return u.default.createElement("div",null);var e={team:this.props.team,user:this.props.user,scrollToTop:this.scrollToTop};return u.default.createElement("div",{className:"backstage"},u.default.createElement(p.default,null),u.default.createElement(g.default,null),u.default.createElement(j.default,{team:this.props.team,siteName:this.props.siteName}),u.default.createElement(f.default,{pluggableName:"Root"}),u.default.createElement("div",{className:"backstage-body",ref:this.setListRef},u.default.createElement(R.default,{team:this.props.team,user:this.props.user,enableCustomEmoji:this.props.enableCustomEmoji,enableIncomingWebhooks:this.props.enableIncomingWebhooks,enableOutgoingWebhooks:this.props.enableOutgoingWebhooks,enableCommands:this.props.enableCommands,enableOAuthServiceProvider:this.props.enableOAuthServiceProvider,canCreateCustomEmoji:this.props.canCreateCustomEmoji}),u.default.createElement(m.Switch,null,u.default.createElement(F,{extraProps:e,exact:!0,path:"/:team/integrations",component:h.default}),u.default.createElement(F,{extraProps:e,exact:!0,path:this.props.match.url+"/incoming_webhooks",component:b.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/incoming_webhooks/add",component:E.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/incoming_webhooks/edit",component:k.default}),u.default.createElement(F,{extraProps:e,exact:!0,path:this.props.match.url+"/outgoing_webhooks",component:M.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/outgoing_webhooks/add",component:y.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/outgoing_webhooks/edit",component:N.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/commands",component:A.default}),u.default.createElement(F,{extraProps:e,exact:!0,path:this.props.match.url+"/oauth2-apps",component:C.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/oauth2-apps/add",component:w.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/oauth2-apps/edit",component:O.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/confirm",component:S.default}),u.default.createElement(F,{extraProps:e,exact:!0,path:"/:team/emoji",component:_.default}),u.default.createElement(F,{extraProps:e,path:this.props.match.url+"/add",component:v.default}))))}}]),t}(u.default.Component);T.propTypes={user:c.default.object,team:c.default.object,match:c.default.shape({url:c.default.string.isRequired}).isRequired,siteName:c.default.string,enableCustomEmoji:c.default.bool.isRequired,enableIncomingWebhooks:c.default.bool.isRequired,enableOutgoingWebhooks:c.default.bool.isRequired,enableCommands:c.default.bool.isRequired,enableOAuthServiceProvider:c.default.bool.isRequired,canCreateCustomEmoji:c.default.bool.isRequired},t.default=T},2232:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(96),o=function(e){return e&&e.__esModule?e:{default:e}}(a(2233));t.default=(0,n.connect)(function(e){var t=(0,r.getConfig)(e);return{siteName:t.SiteName,enableIncomingWebhooks:"true"===t.EnableIncomingWebhooks,enableOutgoingWebhooks:"true"===t.EnableOutgoingWebhooks,enableCommands:"true"===t.EnableCommands,enableOAuthServiceProvider:"true"===t.EnableOAuthServiceProvider,enableOnlyAdminIntegrations:"true"===t.EnableOnlyAdminIntegrations}})(o.default)},2233:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(282)),r=E(a(281)),o=E(a(285)),s=E(a(283)),l=E(a(284)),i=E(a(1)),d=E(a(3)),u=a(766),c=a(25),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),f=E(a(2234)),p=E(a(2235)),g=E(a(2236)),h=E(a(2237)),_=E(a(870)),v=E(a(827)),b=E(a(2238));function E(e){return e&&e.__esModule?e:{default:e}}var k=function(e){function t(){var e,a,o,l;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),u=0;u<i;u++)d[u]=arguments[u];return a=o=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),o.updateTitle=function(){var e=o.props.siteName||"";document.title=m.localizeMessage("admin.sidebar.integrations","Integrations")+" - "+o.props.team.display_name+" "+e},l=a,(0,s.default)(o,l)}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.updateTitle()}},{key:"render",value:function(){var e=[];return this.props.enableIncomingWebhooks&&e.push(d.default.createElement(v.default,{teamId:this.props.team.id,permissions:[c.Permissions.MANAGE_WEBHOOKS],key:"incomingWebhookPermission"},d.default.createElement(b.default,{key:"incomingWebhook",image:f.default,title:d.default.createElement(u.FormattedMessage,{id:"integrations.incomingWebhook.title",defaultMessage:"Incoming Webhook"}),description:d.default.createElement(u.FormattedMessage,{id:"integrations.incomingWebhook.description",defaultMessage:"Incoming webhooks allow external integrations to send messages"}),link:"/"+this.props.team.name+"/integrations/incoming_webhooks"}))),this.props.enableOutgoingWebhooks&&e.push(d.default.createElement(v.default,{teamId:this.props.team.id,permissions:[c.Permissions.MANAGE_WEBHOOKS],key:"outgoingWebhookPermission"},d.default.createElement(b.default,{key:"outgoingWebhook",image:g.default,title:d.default.createElement(u.FormattedMessage,{id:"integrations.outgoingWebhook.title",defaultMessage:"Outgoing Webhook"}),description:d.default.createElement(u.FormattedMessage,{id:"integrations.outgoingWebhook.description",defaultMessage:"Outgoing webhooks allow external integrations to receive and respond to messages"}),link:"/"+this.props.team.name+"/integrations/outgoing_webhooks"}))),this.props.enableCommands&&e.push(d.default.createElement(v.default,{teamId:this.props.team.id,permissions:[c.Permissions.MANAGE_SLASH_COMMANDS],key:"commandPermission"},d.default.createElement(b.default,{key:"command",image:h.default,title:d.default.createElement(u.FormattedMessage,{id:"integrations.command.title",defaultMessage:"Slash Command"}),description:d.default.createElement(u.FormattedMessage,{id:"integrations.command.description",defaultMessage:"Slash commands send events to an external integration"}),link:"/"+this.props.team.name+"/integrations/commands"}))),this.props.enableOAuthServiceProvider&&e.push(d.default.createElement(_.default,{permissions:[c.Permissions.MANAGE_OAUTH],key:"oauth2AppsPermission"},d.default.createElement(b.default,{key:"oauth2Apps",image:p.default,title:d.default.createElement(u.FormattedMessage,{id:"integrations.oauthApps.title",defaultMessage:"OAuth 2.0 Applications"}),description:d.default.createElement(u.FormattedMessage,{id:"integrations.oauthApps.description",defaultMessage:"Auth 2.0 allows external applications to make authorized requests to the Mattermost API."}),link:"/"+this.props.team.name+"/integrations/oauth2-apps"}))),d.default.createElement("div",{className:"backstage-content row"},d.default.createElement("div",{className:"backstage-header"},d.default.createElement("h1",null,d.default.createElement(u.FormattedMessage,{id:"integrations.header",defaultMessage:"Integrations"}))),d.default.createElement("div",{className:"backstage-list__help"},d.default.createElement(u.FormattedMessage,{id:"integrations.help",defaultMessage:"Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Mattermost.",values:{appDirectory:d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},d.default.createElement(u.FormattedMessage,{id:"integrations.help.appDirectory",defaultMessage:"App Directory"}))}})),d.default.createElement("div",null,e))}}],[{key:"propTypes",get:function(){return{team:i.default.object,user:i.default.object,siteName:i.default.string,enableIncomingWebhooks:i.default.bool,enableOutgoingWebhooks:i.default.bool,enableCommands:i.default.bool,enableOAuthServiceProvider:i.default.bool,enableOnlyAdminIntegrations:i.default.bool}}}]),t}(d.default.Component);t.default=k},2234:function(e,t,a){e.exports=a.p+"files/fd69f7891f867c2aa14011da92b728ac.jpg"},2235:function(e,t,a){e.exports=a.p+"files/ce81936d829c1ac530749ba2fe913de0.png"},2236:function(e,t,a){e.exports=a.p+"files/2aa264fb1956b8be41f2047d428a1a1e.jpg"},2237:function(e,t,a){e.exports=a.p+"files/d184fcdb23c1e24bfd7132950ceb4f68.jpg"},2238:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(282)),r=c(a(281)),o=c(a(285)),s=c(a(283)),l=c(a(284)),i=c(a(1)),d=c(a(3)),u=a(287);function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.image,a=e.title,n=e.description,r=e.link;return d.default.createElement(u.Link,{to:r,className:"integration-option"},d.default.createElement("img",{className:"integration-option__image",src:t}),d.default.createElement("div",{className:"integration-option__title"},a),d.default.createElement("div",{className:"integration-option__description"},n))}}],[{key:"propTypes",get:function(){return{image:i.default.string.isRequired,title:i.default.node.isRequired,description:i.default.node.isRequired,link:i.default.string.isRequired}}}]),t}(d.default.Component);t.default=m},2239:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(289),s=a(850),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2240));t.default=(0,n.connect)(function(e){var t=(0,o.getCurrentTeam)(e)||{};return{teamId:t.id,teamName:t.name,teamDisplayName:t.display_name,siteName:e.entities.general.config.SiteName}},function(e){return{actions:(0,r.bindActionCreators)({loadRolesIfNeeded:s.loadRolesIfNeeded},e)}})(l.default)},2240:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(282)),r=h(a(281)),o=h(a(285)),s=h(a(283)),l=h(a(284)),i=h(a(3)),d=h(a(1)),u=a(766),c=a(287),m=h(a(187)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),p=h(a(827)),g=h(a(2241));function h(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){var e,a,o,l;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),u=0;u<i;u++)d[u]=arguments[u];return a=o=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),o.updateTitle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props;document.title=f.localizeMessage("custom_emoji.header","Custom Emoji")+" - "+e.teamDisplayName+" "+e.siteName},l=a,(0,s.default)(o,l)}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.updateTitle(),this.props.actions.loadRolesIfNeeded(["system_admin","team_admin","system_user","team_user"])}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.siteName!==e.siteName&&this.updateTitle(e)}},{key:"render",value:function(){return i.default.createElement("div",{className:"backstage-content emoji-list"},i.default.createElement("div",{className:"backstage-header"},i.default.createElement("h1",null,i.default.createElement(u.FormattedMessage,{id:"emoji_list.header",defaultMessage:"Custom Emoji"})),i.default.createElement(p.default,{teamId:this.props.teamId,permissions:[m.default.MANAGE_EMOJIS]},i.default.createElement(c.Link,{className:"add-link",to:"/"+this.props.teamName+"/emoji/add"},i.default.createElement("button",{type:"button",className:"btn btn-primary"},i.default.createElement(u.FormattedMessage,{id:"emoji_list.add",defaultMessage:"Add Custom Emoji"})))),i.default.createElement(g.default,{scrollToTop:this.props.scrollToTop})))}}]),t}(i.default.Component);_.propTypes={teamId:d.default.string.isRequired,teamName:d.default.string.isRequired,teamDisplayName:d.default.string.isRequired,siteName:d.default.string,scrollToTop:d.default.func.isRequired,actions:d.default.shape({loadRolesIfNeeded:d.default.func.isRequired}).isRequired},_.defaultProps={teamName:"",teamDisplayName:"",siteName:""},t.default=_},2241:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(880),s=a(849),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2242));t.default=(0,n.connect)(function(e){return{emojiIds:(0,o.getCustomEmojiIdsSortedByName)(e)||[]}},function(e){return{actions:(0,r.bindActionCreators)({getCustomEmojis:s.getCustomEmojis,searchCustomEmojis:s.searchCustomEmojis},e)}})(l.default)},2242:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a(185)),r=b(a(181)),o=b(a(182)),s=b(a(282)),l=b(a(281)),i=b(a(285)),d=b(a(283)),u=b(a(284)),c=b(a(3)),m=b(a(1)),f=a(766),p=a(25),g=a(765),h=b(a(785)),_=b(a(846)),v=b(a(2243));function b(e){return e&&e.__esModule?e:{default:e}}var E=50,k=200,M=function(e){function t(e){var a=this;(0,l.default)(this,t);var i=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return i.nextPage=function(e){e&&e.preventDefault();var t=i.state.page+1;i.setState({nextLoading:!0}),i.props.actions.getCustomEmojis(t,E,p.Emoji.SORT_BY_NAME,!0).then(function(e){var a=e.data;i.setState({page:t,nextLoading:!1}),a&&a.length<E&&i.setState({missingPages:!1}),i.props.scrollToTop()})},i.previousPage=function(e){e&&e.preventDefault(),i.setState({page:i.state.page-1,nextLoading:!1}),i.props.scrollToTop()},i.onSearchChange=function(e){if(e&&e.target){var t=e.target.value||"";clearTimeout(i.searchTimeout),i.searchTimeout=setTimeout((0,o.default)(r.default.mark(function e(){var n,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.trim()){e.next=3;break}return i.setState({searchEmojis:null,page:0}),e.abrupt("return");case 3:return i.setState({loading:!0}),e.next=6,i.props.actions.searchCustomEmojis(t,{},!0);case 6:n=e.sent,(o=n.data)?i.setState({searchEmojis:o.map(function(e){return e.id}),loading:!1}):i.setState({searchEmojis:[],loading:!1});case 9:case"end":return e.stop()}},e,a)})),k)}},i.deleteFromSearch=function(e){if(i.state.searchEmojis){var t=i.state.searchEmojis.indexOf(e);if(!(t<0)){var a=[].concat((0,n.default)(i.state.searchEmojis));a.splice(t,1),i.setState({searchEmojis:a})}}},i.searchTimeout=null,i.state={loading:!0,page:0,nextLoading:!1,searchEmojis:null,missingPages:!0},i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getCustomEmojis(0,E+1,p.Emoji.SORT_BY_NAME,!0).then(function(t){var a=t.data;e.setState({loading:!1}),a&&a.length<E&&e.setState({missingPages:!1})})}},{key:"render",value:function(){var e=this,t=this.state.searchEmojis,a=[],n=void 0,r=void 0;if(this.state.loading)a.push(c.default.createElement("tr",{key:"loading",className:"backstage-list__item backstage-list__empty"},c.default.createElement("td",{colSpan:"4"},c.default.createElement(h.default,{key:"loading"}))));else if(0===this.props.emojiIds.length||t&&0===t.length)a.push(c.default.createElement("tr",{key:"empty",className:"backstage-list__item backstage-list__empty"},c.default.createElement("td",{colSpan:"4"},c.default.createElement(f.FormattedMessage,{id:"emoji_list.empty",defaultMessage:"No custom emoji found"}))));else if(t)t.forEach(function(t){a.push(c.default.createElement(v.default,{key:"emoji_search_item"+t,emojiId:t,onDelete:e.deleteFromSearch}))});else{var o=this.state.page*E,s=o+E;if(this.props.emojiIds.slice(o,s).forEach(function(e){a.push(c.default.createElement(v.default,{key:"emoji_list_item"+e,emojiId:e}))}),this.state.missingPages){var l=c.default.createElement("span",null,c.default.createElement(f.FormattedMessage,{id:"filtered_user_list.next",defaultMessage:"Next"}),c.default.createElement("i",{className:"fa fa-chevron-right margin-left",title:(0,g.localizeMessage)("generic_icons.next","Next Icon")}));n=c.default.createElement(_.default,{btnClass:"btn-link",extraClasses:"pull-right",onClick:this.nextPage,saving:this.state.nextLoading,disabled:this.state.nextLoading,defaultMessage:l,savingMessage:l})}this.state.page>0&&(r=c.default.createElement("button",{className:"btn btn-link",onClick:this.previousPage},c.default.createElement("i",{className:"fa fa-chevron-left margin-right",title:(0,g.localizeMessage)("generic_icons.previous","Previous Icon")}),c.default.createElement(f.FormattedMessage,{id:"filtered_user_list.prev",defaultMessage:"Previous"})))}return c.default.createElement("div",null,c.default.createElement("div",{className:"backstage-filters"},c.default.createElement("div",{className:"backstage-filter__search"},c.default.createElement("i",{className:"fa fa-search",title:(0,g.localizeMessage)("generic_icons.search","Search Icon")}),c.default.createElement("input",{type:"search",className:"form-control",placeholder:(0,g.localizeMessage)("emoji_list.search","Search Custom Emoji"),onChange:this.onSearchChange,style:y.search}))),c.default.createElement("span",{className:"backstage-list__help"},c.default.createElement("p",null,c.default.createElement(f.FormattedMessage,{id:"emoji_list.help",defaultMessage:"Custom emoji are available to everyone on your server. Type ':' followed by two characters in a message box to bring up the emoji selection menu."})),c.default.createElement("p",null,c.default.createElement(f.FormattedMessage,{id:"emoji_list.help2",defaultMessage:"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'."}))),c.default.createElement("div",{className:"backstage-list"},c.default.createElement("table",{className:"emoji-list__table"},c.default.createElement("thead",null,c.default.createElement("tr",{className:"backstage-list__item emoji-list__table-header"},c.default.createElement("th",{className:"emoji-list__name"},c.default.createElement(f.FormattedMessage,{id:"emoji_list.name",defaultMessage:"Name"})),c.default.createElement("th",{className:"emoji-list__image"},c.default.createElement(f.FormattedMessage,{id:"emoji_list.image",defaultMessage:"Image"})),c.default.createElement("th",{className:"emoji-list__creator"},c.default.createElement(f.FormattedMessage,{id:"emoji_list.creator",defaultMessage:"Creator"})),c.default.createElement("th",{className:"emoji-list_actions"},c.default.createElement(f.FormattedMessage,{id:"emoji_list.actions",defaultMessage:"Actions"})))),c.default.createElement("tbody",null,a))),c.default.createElement("div",{className:"filter-controls padding-top x2"},r,n))}}]),t}(c.default.Component);M.propTypes={emojiIds:m.default.arrayOf(m.default.string).isRequired,scrollToTop:m.default.func.isRequired,actions:m.default.shape({getCustomEmojis:m.default.func.isRequired,searchCustomEmojis:m.default.func.isRequired}).isRequired},t.default=M;var y={search:{flexGrow:0,flexShrink:0}}},2243:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(770),s=a(289),l=a(849),i=a(765),d=function(e){return e&&e.__esModule?e:{default:e}}(a(2244));t.default=(0,n.connect)(function(e,t){var a=e.entities.emojis.customEmoji[t.emojiId],n=(0,o.getUser)(e,a.creator_id);return{emoji:a,creatorDisplayName:(0,i.getDisplayNameByUser)(n),creatorUsername:n?n.username:"",currentUserId:(0,o.getCurrentUserId)(e),currentTeam:(0,s.getCurrentTeam)(e)}},function(e){return{actions:(0,r.bindActionCreators)({deleteCustomEmoji:l.deleteCustomEmoji},e)}})(d.default)},2244:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(282)),r=p(a(281)),o=p(a(285)),s=p(a(283)),l=p(a(284)),i=p(a(3)),d=p(a(1)),u=p(a(187)),c=a(183),m=p(a(2245)),f=p(a(827));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){var e,a,o,l;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),u=0;u<i;u++)d[u]=arguments[u];return a=o=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),o.handleDelete=function(){o.props.onDelete&&o.props.onDelete(o.props.emoji.id),o.props.actions.deleteCustomEmoji(o.props.emoji.id)},l=a,(0,s.default)(o,l)}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props.emoji,t=this.props.creatorUsername,a=this.props.creatorDisplayName;t&&t!==a&&(a+=" (@"+t+")");var n=null;return n=e.creator_id===this.props.currentUserId?i.default.createElement(f.default,{teamId:this.props.currentTeam.id,permissions:[u.default.MANAGE_EMOJIS]},i.default.createElement(m.default,{onDelete:this.handleDelete})):i.default.createElement(f.default,{teamId:this.props.currentTeam.id,permissions:[u.default.MANAGE_EMOJIS]},i.default.createElement(f.default,{teamId:this.props.currentTeam.id,permissions:[u.default.MANAGE_OTHERS_EMOJIS]},i.default.createElement(m.default,{onDelete:this.handleDelete}))),i.default.createElement("tr",{className:"backstage-list__item"},i.default.createElement("td",{className:"emoji-list__name"},":"+e.name+":"),i.default.createElement("td",{className:"emoji-list__image"},i.default.createElement("span",{className:"emoticon",style:{backgroundImage:"url("+c.Client4.getCustomEmojiImageUrl(e.id)+")"}})),i.default.createElement("td",{className:"emoji-list__creator"},a),i.default.createElement("td",{className:"emoji-list-item_actions"},n))}}]),t}(i.default.Component);g.propTypes={emoji:d.default.object.isRequired,currentUserId:d.default.string.isRequired,creatorDisplayName:d.default.string.isRequired,creatorUsername:d.default.string,currentTeam:d.default.object,onDelete:d.default.func,actions:d.default.shape({deleteCustomEmoji:d.default.func.isRequired}).isRequired},g.defaultProps={emoji:{},currentUserId:"",currentTeam:{},creatorDisplayName:""},t.default=g},2245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(282)),r=f(a(281)),o=f(a(285)),s=f(a(283)),l=f(a(284)),i=f(a(1)),d=f(a(3)),u=a(766),c=f(a(1402)),m=a(765);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"triggerTitle",get:function(){return d.default.createElement(u.FormattedMessage,{id:"emoji_list.delete",defaultMessage:"Delete"})}},{key:"modalTitle",get:function(){return d.default.createElement(u.FormattedMessage,{id:"emoji_list.delete.confirm.title",defaultMessage:"Delete Custom Emoji"})}},{key:"modalMessage",get:function(){return d.default.createElement("div",{className:"alert alert-warning"},d.default.createElement("i",{className:"fa fa-warning fa-margin--right",title:(0,m.localizeMessage)("generic_icons.warning","Warning Icon")}),d.default.createElement(u.FormattedMessage,{id:"emoji_list.delete.confirm.msg",defaultMessage:"This action permanently deletes the custom emoji. Are you sure you want to delete it?"}))}},{key:"modalConfirmButton",get:function(){return d.default.createElement(u.FormattedMessage,{id:"emoji_list.delete.confirm.button",defaultMessage:"Delete"})}}]),t}(c.default);p.propTypes={onDelete:i.default.func.isRequired},t.default=p},2246:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(282)),r=_(a(281)),o=_(a(285)),s=_(a(283)),l=_(a(284)),i=_(a(1)),d=_(a(3)),u=a(766),c=a(287),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1067)),f=_(a(822)),p=_(a(916)),g=_(a(811)),h=_(a(951));function _(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.updateName=a.updateName.bind(a),a.updateImage=a.updateImage.bind(a),a.state={name:"",image:null,imageUrl:"",saving:!1,error:null},a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.saving){this.setState({saving:!0,error:null});var a={creator_id:this.props.user.id,name:this.state.name.trim().toLowerCase()};a.name.startsWith(":")&&a.name.endsWith(":")&&(a.name=a.name.substring(1,a.name.length-1)),a.name?/[^a-z0-9_-]/.test(a.name)?this.setState({saving:!1,error:d.default.createElement(u.FormattedMessage,{id:"add_emoji.nameInvalid",defaultMessage:"An emoji's name can only contain lowercase letters, numbers, and the symbols '-' and '_'."})}):f.default.hasSystemEmoji(a.name)?this.setState({saving:!1,error:d.default.createElement(u.FormattedMessage,{id:"add_emoji.nameTaken",defaultMessage:"This name is already in use by a system emoji. Please choose another name."})}):this.state.image?m.addEmoji(a,this.state.image,function(){t.props.history.push("/"+t.props.team.name+"/emoji")},function(e){t.setState({saving:!1,error:e.message})}):this.setState({saving:!1,error:d.default.createElement(u.FormattedMessage,{id:"add_emoji.imageRequired",defaultMessage:"An image is required for the emoji"})}):this.setState({saving:!1,error:d.default.createElement(u.FormattedMessage,{id:"add_emoji.nameRequired",defaultMessage:"A name is required for the emoji"})})}}},{key:"updateName",value:function(e){this.setState({name:e.target.value})}},{key:"updateImage",value:function(e){var t=this;if(0!==e.target.files.length){var a=e.target.files[0],n=new FileReader;n.onload=function(){t.setState({image:a,imageUrl:n.result})},n.readAsDataURL(a)}else this.setState({image:null,imageUrl:""})}},{key:"render",value:function(){var e=null;this.state.image&&(e=d.default.createElement("span",{className:"add-emoji__filename"},this.state.image.name));var t=null;return this.state.imageUrl&&(t=d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"preview"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.preview",defaultMessage:"Preview"})),d.default.createElement("div",{className:"col-md-5 col-sm-8 add-emoji__preview"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.preview.sentence",defaultMessage:"This is a sentence with {image} in it.",values:{image:d.default.createElement("span",{className:"emoticon",style:{backgroundImage:"url("+this.state.imageUrl+")"}})}})))),d.default.createElement("div",{className:"backstage-content row"},d.default.createElement(p.default,null,d.default.createElement(c.Link,{to:"/"+this.props.team.name+"/emoji"},d.default.createElement(u.FormattedMessage,{id:"emoji_list.header",defaultMessage:"Custom Emoji"})),d.default.createElement(u.FormattedMessage,{id:"add_emoji.header",defaultMessage:"Add"})),d.default.createElement("div",{className:"backstage-form"},d.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"name"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.name",defaultMessage:"Name"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("input",{id:"name",type:"text",maxLength:"64",className:"form-control",value:this.state.name,onChange:this.updateName}),d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.name.help",defaultMessage:"Choose a name for your emoji made of up to 64 characters consisting of lowercase letters, numbers, and the symbols '-' and '_'."})))),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"image"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.image",defaultMessage:"Image"})),d.default.createElement("div",{className:"col-md-5 col-sm-8"},d.default.createElement("div",null,d.default.createElement("div",{className:"add-emoji__upload"},d.default.createElement("button",{className:"btn btn-primary"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.image.button",defaultMessage:"Select"})),d.default.createElement("input",{type:"file",accept:".jpg,.png,.gif",multiple:!1,onChange:this.updateImage})),e,d.default.createElement("div",{className:"form__help"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.image.help",defaultMessage:"Choose the image for your emoji. The image can be a gif, png, or jpeg file with a max size of 64 KB and dimensions up to 128 by 128 pixels."}))))),t,d.default.createElement("div",{className:"backstage-form__footer"},d.default.createElement(g.default,{type:"backstage",error:this.state.error}),d.default.createElement(c.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/emoji"},d.default.createElement(u.FormattedMessage,{id:"add_emoji.cancel",defaultMessage:"Cancel"})),d.default.createElement(h.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},d.default.createElement(u.FormattedMessage,{id:"add_emoji.save",defaultMessage:"Save"}))))))}}]),t}(d.default.Component);v.propTypes={team:i.default.object,user:i.default.object},v.contextTypes={router:i.default.object.isRequired},t.default=v},2247:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(126)),r=a(286),o=a(2),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(816)),l=a(778),i=a(917),d=a(289),u=a(770),c=a(294),m=a(25),f=a(96),p=g(a(2248));function g(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.connect)(function(e){var t=(0,f.getConfig)(e),a=(0,d.getCurrentTeamId)(e),r=(0,c.haveITeamPermission)(e,{team:a,permission:m.Permissions.MANAGE_OTHERS_WEBHOOKS}),o=(0,i.getIncomingHooks)(e),s=(0,n.default)(o).map(function(e){return o[e]}).filter(function(e){return e.team_id===a}),p="true"===t.EnableIncomingWebhooks;return{incomingWebhooks:s,channels:(0,l.getAllChannels)(e),users:(0,u.getUsers)(e),teamId:a,canManageOthersWebhooks:r,enableIncomingWebhooks:p}},function(e){return{actions:(0,o.bindActionCreators)({getIncomingHooks:s.getIncomingHooks,removeIncomingHook:s.removeIncomingHook},e)}})(p.default)},2248:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(282)),r=g(a(281)),o=g(a(285)),s=g(a(283)),l=g(a(284)),i=g(a(1)),d=g(a(3)),u=a(766),c=g(a(22)),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),f=g(a(1002)),p=g(a(2249));function g(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.deleteIncomingWebhook=function(e){a.props.actions.removeIncomingHook(e.id)},a.deleteIncomingWebhook=a.deleteIncomingWebhook.bind(a),a.incomingWebhookCompare=a.incomingWebhookCompare.bind(a),a.state={loading:!0},a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableIncomingWebhooks&&this.props.actions.getIncomingHooks(this.props.teamId,c.default.Integrations.START_PAGE_NUM,c.default.Integrations.PAGE_SIZE).then(function(){return e.setState({loading:!1})})}},{key:"incomingWebhookCompare",value:function(e,t){var a=e.display_name;if(!a){var n=this.props.channels[e.channel_id];a=n?n.display_name:m.localizeMessage("installed_incoming_webhooks.unknown_channel","A Private Webhook")}var r=t.display_name;return a.localeCompare(r)}},{key:"render",value:function(){var e=this,t=this.props.incomingWebhooks.sort(this.incomingWebhookCompare).map(function(t){var a=e.props.canManageOthersWebhooks||e.props.user.id===t.user_id,n=e.props.channels[t.channel_id];return d.default.createElement(p.default,{key:t.id,incomingWebhook:t,onDelete:e.deleteIncomingWebhook,creator:e.props.users[t.user_id]||{},canChange:a,team:e.props.team,channel:n})});return d.default.createElement(f.default,{header:d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Installed Incoming Webhooks"}),addText:d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.add",defaultMessage:"Add Incoming Webhook"}),addLink:"/"+this.props.team.name+"/integrations/incoming_webhooks/add",emptyText:d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.empty",defaultMessage:"No incoming webhooks found"}),helpText:d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.help",defaultMessage:"Use incoming webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.",values:{buildYourOwn:d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-incoming.html"},d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.help.buildYourOwn",defaultMessage:"Build your own"})),appDirectory:d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.help.appDirectory",defaultMessage:"App Directory"}))}}),searchPlaceholder:m.localizeMessage("installed_incoming_webhooks.search","Search Incoming Webhooks"),loading:this.state.loading},t)}}]),t}(d.default.PureComponent);h.propTypes={team:i.default.object,user:i.default.object,canManageOthersWebhooks:i.default.bool,incomingWebhooks:i.default.array,channels:i.default.object,users:i.default.object,teamId:i.default.string,actions:i.default.shape({removeIncomingHook:i.default.func,getIncomingHooks:i.default.func}),enableIncomingWebhooks:i.default.bool},t.default=h},2249:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(282)),r=h(a(281)),o=h(a(285)),s=h(a(283)),l=h(a(284)),i=h(a(1)),d=h(a(3)),u=a(766),c=a(287),m=a(786),f=a(288),p=h(a(952)),g=h(a(1003));function h(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleDelete",value:function(){this.props.onDelete(this.props.incomingWebhook)}},{key:"render",value:function(){var e=this.props.incomingWebhook,a=this.props.channel,n=this.props.filter?this.props.filter.toLowerCase():"";if(!t.matchesFilter(e,a,n))return null;var r=void 0;r=e.display_name?e.display_name:a?a.display_name:d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.unknown_channel",defaultMessage:"A Private Webhook"});var o=null;e.description&&(o=d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__description"},e.description)));var s=null;this.props.canChange&&(s=d.default.createElement("div",{className:"item-actions"},d.default.createElement(c.Link,{to:"/"+this.props.team.name+"/integrations/incoming_webhooks/edit?id="+e.id},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",d.default.createElement(g.default,{messageId:(0,f.t)("installed_incoming_webhooks.delete.confirm"),onDelete:this.handleDelete})));var l=(0,m.getSiteURL)()+"/hooks/"+e.id;return d.default.createElement("div",{className:"backstage-list__item"},d.default.createElement("div",{className:"item-details"},d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__name"},r)),o,d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__url"},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.url",defaultMessage:"URL: {url}",values:{url:l}}),d.default.createElement("span",null,d.default.createElement(p.default,{value:l})))),d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__creation"},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:e.create_at}})))),s)}}],[{key:"matchesFilter",value:function(e,t,a){return!a||(-1!==e.display_name.toLowerCase().indexOf(a)||-1!==e.description.toLowerCase().indexOf(a)||!(!e.channel_id||!t||-1===t.name.toLowerCase().indexOf(a)))}}]),t}(d.default.PureComponent);_.propTypes={incomingWebhook:i.default.object.isRequired,onDelete:i.default.func.isRequired,filter:i.default.string,creator:i.default.object.isRequired,canChange:i.default.bool.isRequired,team:i.default.object.isRequired,channel:i.default.object},t.default=_},2250:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=a(96),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2251));t.default=(0,n.connect)(function(e){var t=(0,s.getConfig)(e),a="true"===t.EnablePostUsernameOverride,n="true"===t.EnablePostIconOverride;return{createIncomingHookRequest:e.requests.integrations.createIncomingHook,enablePostUsernameOverride:a,enablePostIconOverride:n}},function(e){return{actions:(0,r.bindActionCreators)({createIncomingHook:o.createIncomingHook},e)}})(l.default)},2251:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(181)),r=g(a(182)),o=g(a(282)),s=g(a(281)),l=g(a(285)),i=g(a(283)),d=g(a(284)),u=g(a(1)),c=g(a(3)),m=a(291),f=a(288),p=g(a(1403));function g(e){return e&&e.__esModule?e:{default:e}}var h={id:(0,f.t)("integrations.add"),defaultMessage:"Add"},_={id:(0,f.t)("add_incoming_webhook.save"),defaultMessage:"Save"},v=function(e){function t(e){var a=this;(0,s.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.addIncomingHook=function(){var e=(0,r.default)(n.default.mark(function e(t){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({serverError:""}),e.next=3,l.props.actions.createIncomingHook(t);case 3:if(r=e.sent,!(o=r.data)){e.next=8;break}return m.browserHistory.push("/"+l.props.team.name+"/integrations/confirm?type=incoming_webhooks&id="+o.id),e.abrupt("return");case 8:l.props.createIncomingHookRequest.error&&l.setState({serverError:l.props.createIncomingHookRequest.error.message});case 9:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.state={serverError:""},l}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement(p.default,{team:this.props.team,header:h,footer:_,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride,action:this.addIncomingHook,serverError:this.state.serverError})}}]),t}(c.default.PureComponent);v.propTypes={team:u.default.object.isRequired,createIncomingHookRequest:u.default.object.isRequired,enablePostUsernameOverride:u.default.bool.isRequired,enablePostIconOverride:u.default.bool.isRequired,actions:u.default.shape({createIncomingHook:u.default.func.isRequired}).isRequired},t.default=v},2252:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=a(96),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2253));t.default=(0,n.connect)(function(e,t){var a=(0,s.getConfig)(e),n="true"===a.EnableIncomingWebhooks,r="true"===a.EnablePostUsernameOverride,o="true"===a.EnablePostIconOverride,l=new URLSearchParams(t.location.search).get("id");return{hookId:l,hook:e.entities.integrations.incomingHooks[l],updateIncomingHookRequest:e.requests.integrations.updateIncomingHook,enableIncomingWebhooks:n,enablePostUsernameOverride:r,enablePostIconOverride:o}},function(e){return{actions:(0,r.bindActionCreators)({updateIncomingHook:o.updateIncomingHook,getIncomingHook:o.getIncomingHook},e)}})(l.default)},2253:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(181)),r=h(a(182)),o=h(a(282)),s=h(a(281)),l=h(a(285)),i=h(a(283)),d=h(a(284)),u=h(a(1)),c=h(a(3)),m=a(291),f=a(288),p=h(a(1403)),g=h(a(785));function h(e){return e&&e.__esModule?e:{default:e}}var _={id:(0,f.t)("integrations.edit"),defaultMessage:"Edit"},v={id:(0,f.t)("update_incoming_webhook.update"),defaultMessage:"Update"},b=function(e){function t(e){var a=this;(0,s.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.editIncomingHook=function(){var e=(0,r.default)(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.newHook=t,l.props.hook.id&&(t.id=l.props.hook.id),l.props.hook.token&&(t.token=l.props.hook.token),e.next=5,l.submitHook();case 5:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.submitHook=(0,r.default)(n.default.mark(function e(){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({serverError:""}),e.next=3,l.props.actions.updateIncomingHook(l.newHook);case 3:if(t=e.sent,!t.data){e.next=8;break}return m.browserHistory.push("/"+l.props.team.name+"/integrations/incoming_webhooks"),e.abrupt("return");case 8:l.props.updateIncomingHookRequest.error&&l.setState({serverError:l.props.updateIncomingHookRequest.error.message});case 9:case"end":return e.stop()}},e,a)})),l.state={showConfirmModal:!1,serverError:""},l}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.enableIncomingWebhooks&&this.props.actions.getIncomingHook(this.props.hookId)}},{key:"render",value:function(){return this.props.hook?c.default.createElement(p.default,{team:this.props.team,header:_,footer:v,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride,action:this.editIncomingHook,serverError:this.state.serverError,initialHook:this.props.hook}):c.default.createElement(g.default,null)}}]),t}(c.default.PureComponent);b.propTypes={team:u.default.object.isRequired,hook:u.default.object,hookId:u.default.string.isRequired,updateIncomingHookRequest:u.default.object.isRequired,enableIncomingWebhooks:u.default.bool.isRequired,enablePostUsernameOverride:u.default.bool.isRequired,enablePostIconOverride:u.default.bool.isRequired,actions:u.default.shape({updateIncomingHook:u.default.func.isRequired,getIncomingHook:u.default.func.isRequired}).isRequired},t.default=b},2254:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(126)),r=a(286),o=a(2),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(816)),l=a(917),i=a(289),d=a(778),u=a(770),c=a(294),m=a(25),f=a(96),p=g(a(2255));function g(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.connect)(function(e){var t=(0,f.getConfig)(e),a=(0,i.getCurrentTeamId)(e),r=(0,c.haveITeamPermission)(e,{team:a,permission:m.Permissions.MANAGE_OTHERS_WEBHOOKS}),o=(0,l.getOutgoingHooks)(e),s=(0,n.default)(o).map(function(e){return o[e]}).filter(function(e){return e.team_id===a}),p="true"===t.EnableOutgoingWebhooks;return{outgoingWebhooks:s,channels:(0,d.getAllChannels)(e),users:(0,u.getUsers)(e),teamId:a,canManageOthersWebhooks:r,enableOutgoingWebhooks:p}},function(e){return{actions:(0,o.bindActionCreators)({getOutgoingHooks:s.getOutgoingHooks,removeOutgoingHook:s.removeOutgoingHook,regenOutgoingHookToken:s.regenOutgoingHookToken},e)}})(p.default)},2255:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(282)),r=g(a(281)),o=g(a(285)),s=g(a(283)),l=g(a(284)),i=g(a(1)),d=g(a(3)),u=a(766),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),m=g(a(22)),f=g(a(1002)),p=g(a(2256));function g(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.regenOutgoingWebhookToken=function(e){a.props.actions.regenOutgoingHookToken(e.id)},a.removeOutgoingHook=function(e){a.props.actions.removeOutgoingHook(e.id)},a.outgoingWebhookCompare=a.outgoingWebhookCompare.bind(a),a.state={loading:!0},a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableOutgoingWebhooks&&this.props.actions.getOutgoingHooks("",this.props.teamId,m.default.Integrations.START_PAGE_NUM,m.default.Integrations.PAGE_SIZE).then(function(){return e.setState({loading:!1})})}},{key:"outgoingWebhookCompare",value:function(e,t){var a=e.display_name;if(!a){var n=this.props.channels[e.channel_id];a=n?n.display_name:c.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}var r=t.display_name;if(!r){var o=this.props.channels[t.channel_id];r=o?o.display_name:c.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}return a.localeCompare(r)}},{key:"render",value:function(){var e=this,t=this.props.outgoingWebhooks.sort(this.outgoingWebhookCompare).map(function(t){var a=e.props.canManageOthersWebhooks||e.props.user.id===t.creator_id,n=e.props.channels[t.channel_id];return d.default.createElement(p.default,{key:t.id,outgoingWebhook:t,onRegenToken:e.regenOutgoingWebhookToken,onDelete:e.removeOutgoingHook,creator:e.props.users[t.creator_id]||{},canChange:a,team:e.props.team,channel:n})});return d.default.createElement(f.default,{header:d.default.createElement(u.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Installed Outgoing Webhooks"}),addText:d.default.createElement(u.FormattedMessage,{id:"installed_outgoing_webhooks.add",defaultMessage:"Add Outgoing Webhook"}),addLink:"/"+this.props.team.name+"/integrations/outgoing_webhooks/add",emptyText:d.default.createElement(u.FormattedMessage,{id:"installed_outgoing_webhooks.empty",defaultMessage:"No outgoing webhooks found"}),helpText:d.default.createElement(u.FormattedMessage,{id:"installed_outgoing_webhooks.help",defaultMessage:"Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.",values:{buildYourOwn:d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-outgoing.html"},d.default.createElement(u.FormattedMessage,{id:"installed_outgoing_webhooks.help.buildYourOwn",defaultMessage:"Build your own"})),appDirectory:d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},d.default.createElement(u.FormattedMessage,{id:"installed_outgoing_webhooks.help.appDirectory",defaultMessage:"App Directory"}))}}),searchPlaceholder:c.localizeMessage("installed_outgoing_webhooks.search","Search Outgoing Webhooks"),loading:this.state.loading},t)}}]),t}(d.default.PureComponent);h.propTypes={team:i.default.object,user:i.default.object,canManageOthersWebhooks:i.default.bool,outgoingWebhooks:i.default.array,channels:i.default.object,users:i.default.object,teamId:i.default.string,actions:i.default.shape({removeOutgoingHook:i.default.func,getOutgoingHooks:i.default.func,regenOutgoingHookToken:i.default.func}),enableOutgoingWebhooks:i.default.bool},t.default=h},2256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(776)),r=h(a(282)),o=h(a(281)),s=h(a(285)),l=h(a(283)),i=h(a(284)),d=h(a(1)),u=h(a(3)),c=a(766),m=a(287),f=a(288),p=h(a(952)),g=h(a(1003));function h(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleRegenToken=a.handleRegenToken.bind(a),a.handleDelete=a.handleDelete.bind(a),a}return(0,i.default)(t,e),(0,s.default)(t,[{key:"handleRegenToken",value:function(e){e.preventDefault(),this.props.onRegenToken(this.props.outgoingWebhook)}},{key:"handleDelete",value:function(){this.props.onDelete(this.props.outgoingWebhook)}},{key:"makeDisplayName",value:function(e,t){return e.display_name?e.display_name:t?t.display_name:u.default.createElement(c.FormattedMessage,{id:"installed_outgoing_webhooks.unknown_channel",defaultMessage:"A Private Webhook"})}},{key:"matchesFilter",value:function(e,t,a){if(!a)return!0;var r=e.display_name,o=e.description,s=e.trigger_words;if(r&&-1!==r.toLowerCase().indexOf(a)||o&&-1!==o.toLowerCase().indexOf(a))return!0;if(s){var l=!0,i=!1,d=void 0;try{for(var u,c=(0,n.default)(s);!(l=(u=c.next()).done);l=!0){if(-1!==u.value.toLowerCase().indexOf(a))return!0}}catch(e){i=!0,d=e}finally{try{!l&&c.return&&c.return()}finally{if(i)throw d}}}return!(!t||!t.name||-1===t.name.toLowerCase().indexOf(a))}},{key:"render",value:function(){var e=this.props.outgoingWebhook,t=this.props.channel,a=this.props.filter?this.props.filter.toLowerCase():"";if(e&&!this.matchesFilter(e,t,a))return null;var n=this.makeDisplayName(e,t),r=null;e.description&&(r=u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__description"},e.description)));var o=null;e.trigger_words&&e.trigger_words.length>0&&(o=u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__trigger-words"},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.triggerWords",defaultMessage:"Trigger Words: {triggerWords}",values:{triggerWords:e.trigger_words.join(", ")}}))));var s=u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__url"},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}}))),l=void 0;0===e.trigger_when?l=u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenFullWord",defaultMessage:"First word matches a trigger word exactly"}):1===e.trigger_when&&(l=u.default.createElement(c.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenStartsWith",defaultMessage:"First word starts with a trigger word"}));var i=null;return this.props.canChange&&(i=u.default.createElement("div",{className:"item-actions"},u.default.createElement("button",{className:"style--none color--link",onClick:this.handleRegenToken},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.regenToken",defaultMessage:"Regen Token"}))," - ",u.default.createElement(m.Link,{to:"/"+this.props.team.name+"/integrations/outgoing_webhooks/edit?id="+e.id},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",u.default.createElement(g.default,{messageId:(0,f.t)("installed_outgoing_webhooks.delete.confirm"),onDelete:this.handleDelete}))),u.default.createElement("div",{className:"backstage-list__item"},u.default.createElement("div",{className:"item-details"},u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__name"},n)),r,u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__content_type"},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.content_type",defaultMessage:"Content-Type: {contentType}",values:{contentType:e.content_type||"application/x-www-form-urlencoded"}}))),o,u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__trigger-when"},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.triggerWhen",defaultMessage:"Trigger When: {triggerWhen}",values:{triggerWhen:l}}))),u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__token"},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.token",defaultMessage:"Token: {token}",values:{token:e.token}}),u.default.createElement(p.default,{value:e.token}))),u.default.createElement("div",{className:"item-details__row"},u.default.createElement("span",{className:"item-details__creation"},u.default.createElement(c.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:e.create_at}}))),s),i)}}]),t}(u.default.PureComponent);_.propTypes={outgoingWebhook:d.default.object.isRequired,onRegenToken:d.default.func.isRequired,onDelete:d.default.func.isRequired,filter:d.default.string,creator:d.default.object.isRequired,canChange:d.default.bool.isRequired,team:d.default.object.isRequired,channel:d.default.object},t.default=_},2257:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=a(96),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2258));t.default=(0,n.connect)(function(e){var t=(0,s.getConfig)(e),a="true"===t.EnablePostUsernameOverride,n="true"===t.EnablePostIconOverride;return{createOutgoingHookRequest:e.requests.integrations.createOutgoingHook,enablePostUsernameOverride:a,enablePostIconOverride:n}},function(e){return{actions:(0,r.bindActionCreators)({createOutgoingHook:o.createOutgoingHook},e)}})(l.default)},2258:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(181)),r=g(a(182)),o=g(a(282)),s=g(a(281)),l=g(a(285)),i=g(a(283)),d=g(a(284)),u=g(a(1)),c=g(a(3)),m=a(291),f=a(288),p=g(a(1405));function g(e){return e&&e.__esModule?e:{default:e}}var h={id:(0,f.t)("integrations.add"),defaultMessage:"Add"},_={id:(0,f.t)("add_outgoing_webhook.save"),defaultMessage:"Save"},v=function(e){function t(e){var a=this;(0,s.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.addOutgoingHook=function(){var e=(0,r.default)(n.default.mark(function e(t){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({serverError:""}),e.next=3,l.props.actions.createOutgoingHook(t);case 3:if(r=e.sent,!(o=r.data)){e.next=8;break}return m.browserHistory.push("/"+l.props.team.name+"/integrations/confirm?type=outgoing_webhooks&id="+o.id),e.abrupt("return");case 8:l.props.createOutgoingHookRequest.error&&l.setState({serverError:l.props.createOutgoingHookRequest.error.message});case 9:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.state={serverError:""},l}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement(p.default,{team:this.props.team,header:h,footer:_,renderExtra:"",action:this.addOutgoingHook,serverError:this.state.serverError,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride})}}]),t}(c.default.PureComponent);v.propTypes={team:u.default.object.isRequired,createOutgoingHookRequest:u.default.object.isRequired,actions:u.default.shape({createOutgoingHook:u.default.func.isRequired}).isRequired,enablePostUsernameOverride:u.default.bool.isRequired,enablePostIconOverride:u.default.bool.isRequired},t.default=v},2259:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=a(96),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2260));t.default=(0,n.connect)(function(e,t){var a=(0,s.getConfig)(e),n=new URLSearchParams(t.location.search).get("id"),r="true"===a.EnableOutgoingWebhooks,o="true"===a.EnablePostUsernameOverride,l="true"===a.EnablePostIconOverride;return{hookId:n,hook:e.entities.integrations.outgoingHooks[n],updateOutgoingHookRequest:e.requests.integrations.createOutgoingHook,enableOutgoingWebhooks:r,enablePostUsernameOverride:o,enablePostIconOverride:l}},function(e){return{actions:(0,r.bindActionCreators)({updateOutgoingHook:o.updateOutgoingHook,getOutgoingHook:o.getOutgoingHook},e)}})(l.default)},2260:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(181)),r=_(a(182)),o=_(a(282)),s=_(a(281)),l=_(a(285)),i=_(a(283)),d=_(a(284)),u=_(a(1)),c=_(a(3)),m=a(766),f=a(291),p=_(a(806)),g=_(a(1405)),h=_(a(785));function _(e){return e&&e.__esModule?e:{default:e}}var v={id:"integrations.edit",defaultMessage:"Edit"},b={id:"update_outgoing_webhook.update",defaultMessage:"Update"},E=function(e){function t(e){var a=this;(0,s.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.editOutgoingHook=function(){var e=(0,r.default)(n.default.mark(function e(t){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.newHook=t,l.props.hook.id&&(t.id=l.props.hook.id),l.props.hook.token&&(t.token=l.props.hook.token),r=l.props.hook.trigger_words.length===t.trigger_words.length&&l.props.hook.trigger_words.every(function(e,a){return e===t.trigger_words[a]}),o=l.props.hook.callback_urls.length===t.callback_urls.length&&l.props.hook.callback_urls.every(function(e,a){return e===t.callback_urls[a]}),l.props.hook.content_type===t.content_type&&r&&o){e.next=9;break}l.handleConfirmModal(),e.next=11;break;case 9:return e.next=11,l.submitHook();case 11:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.handleConfirmModal=function(){l.setState({showConfirmModal:!0})},l.confirmModalDismissed=function(){l.setState({showConfirmModal:!1})},l.submitHook=(0,r.default)(n.default.mark(function e(){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({serverError:""}),e.next=3,l.props.actions.updateOutgoingHook(l.newHook);case 3:if(t=e.sent,!t.data){e.next=8;break}return f.browserHistory.push("/"+l.props.team.name+"/integrations/outgoing_webhooks"),e.abrupt("return");case 8:l.setState({showConfirmModal:!1}),l.props.updateOutgoingHookRequest.error&&l.setState({serverError:l.props.updateOutgoingHookRequest.error.message});case 10:case"end":return e.stop()}},e,a)})),l.renderExtra=function(){var e=c.default.createElement(m.FormattedMessage,{id:"update_outgoing_webhook.update",defaultMessage:"Update"}),t=c.default.createElement(m.FormattedMessage,{id:"update_outgoing_webhook.confirm",defaultMessage:"Edit Outgoing Webhook"}),a=c.default.createElement(m.FormattedMessage,{id:"update_outgoing_webhook.question",defaultMessage:"Your changes may break the existing outgoing webhook. Are you sure you would like to update it?"});return c.default.createElement(p.default,{title:t,message:a,confirmButtonText:e,show:l.state.showConfirmModal,onConfirm:l.submitHook,onCancel:l.confirmModalDismissed})},l.state={showConfirmModal:!1,serverError:""},l}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.enableOutgoingWebhooks&&this.props.actions.getOutgoingHook(this.props.hookId)}},{key:"render",value:function(){return this.props.hook?c.default.createElement(g.default,{team:this.props.team,header:v,footer:b,renderExtra:this.renderExtra(),action:this.editOutgoingHook,serverError:this.state.serverError,initialHook:this.props.hook,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride}):c.default.createElement(h.default,null)}}]),t}(c.default.PureComponent);E.propTypes={team:u.default.object.isRequired,hook:u.default.object,hookId:u.default.string.isRequired,updateOutgoingHookRequest:u.default.object.isRequired,actions:u.default.shape({updateOutgoingHook:u.default.func.isRequired,getOutgoingHook:u.default.func.isRequired}).isRequired,enableOutgoingWebhooks:u.default.bool,enablePostUsernameOverride:u.default.bool.isRequired,enablePostIconOverride:u.default.bool.isRequired},t.default=E},2261:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(816)),s=a(917),l=a(294),i=a(25),d=a(96),u=function(e){return e&&e.__esModule?e:{default:e}}(a(2262));t.default=(0,n.connect)(function(e){var t=(0,d.getConfig)(e),a="true"===t.EnableOAuthServiceProvider,n="true"===t.EnableOnlyAdminIntegrations;return{canManageOauth:(0,l.haveISystemPermission)(e,{permission:i.Permissions.MANAGE_OAUTH}),oauthApps:(0,s.getOAuthApps)(e),regenOAuthAppSecretRequest:e.requests.integrations.updateOAuthApp,enableOAuthServiceProvider:a,enableOnlyAdminIntegrations:n}},function(e){return{actions:(0,r.bindActionCreators)({getOAuthApps:o.getOAuthApps,regenOAuthAppSecret:o.regenOAuthAppSecret,deleteOAuthApp:o.deleteOAuthApp},e)}})(u.default)},2262:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(42)),r=h(a(794)),o=h(a(282)),s=h(a(281)),l=h(a(285)),i=h(a(283)),d=h(a(284)),u=h(a(1)),c=h(a(3)),m=a(766),f=a(765),p=h(a(1002)),g=h(a(2263));function h(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){(0,s.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.deleteOAuthApp=function(e){e&&e.id&&a.props.actions.deleteOAuthApp(e.id)},a.state={loading:!0},a}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableOAuthServiceProvider&&this.props.actions.getOAuthApps().then(function(){return e.setState({loading:!1})})}},{key:"oauthAppCompare",value:function(e,t){var a=e.name;a||(a=(0,f.localizeMessage)("installed_integrations.unnamed_oauth_app","Unnamed OAuth 2.0 Application"));var n=t.name;return n||(n=(0,f.localizeMessage)("installed_integrations.unnamed_oauth_app","Unnamed OAuth 2.0 Application")),a.localeCompare(n)}},{key:"render",value:function(){var e=this,t=(0,r.default)(this.props.oauthApps).sort(this.oauthAppCompare).map(function(t){return c.default.createElement(g.default,{key:t.id,team:e.props.team,oauthApp:t,regenOAuthAppSecretRequest:e.props.regenOAuthAppSecretRequest,onRegenerateSecret:e.props.actions.regenOAuthAppSecret,onDelete:e.deleteOAuthApp})}),a=void 0;return this.props.enableOAuthServiceProvider&&this.props.canManageOauth&&(a={addLink:"/"+this.props.team.name+"/integrations/oauth2-apps/add",addText:(0,f.localizeMessage)("installed_oauth_apps.add","Add OAuth 2.0 Application")}),c.default.createElement(p.default,(0,n.default)({header:c.default.createElement(m.FormattedMessage,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),helpText:c.default.createElement(m.FormattedMessage,{id:"installed_oauth_apps.help",defaultMessage:"Create {oauthApplications} to securely integrate bots and third-party apps with Mattermost. Visit the {appDirectory} to find available self-hosted apps.",values:{oauthApplications:c.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.mattermost.com/developer/oauth-2-0-applications.html"},c.default.createElement(m.FormattedMessage,{id:"installed_oauth_apps.help.oauthApplications",defaultMessage:"OAuth 2.0 applications"})),appDirectory:c.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},c.default.createElement(m.FormattedMessage,{id:"installed_oauth_apps.help.appDirectory",defaultMessage:"App Directory"}))}}),emptyText:c.default.createElement(m.FormattedMessage,{id:"installed_oauth_apps.empty",defaultMessage:"No OAuth 2.0 Applications found"}),searchPlaceholder:(0,f.localizeMessage)("installed_oauth_apps.search","Search OAuth 2.0 Applications"),loading:this.state.loading},a),t)}}]),t}(c.default.PureComponent);_.propTypes={team:u.default.object,oauthApps:u.default.object,canManageOauth:u.default.bool,regenOAuthAppSecretRequest:u.default.object.isRequired,actions:u.default.shape({getOAuthApps:u.default.func.isRequired,regenOAuthAppSecret:u.default.func.isRequired,deleteOAuthApp:u.default.func.isRequired}).isRequired,enableOAuthServiceProvider:u.default.bool,enableOnlyAdminIntegrations:u.default.bool},t.default=_},2263:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(282)),r=v(a(281)),o=v(a(285)),s=v(a(283)),l=v(a(284)),i=v(a(1)),d=v(a(3)),u=a(766),c=a(287),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),f=a(288),p=v(a(811)),g=v(a(777)),h=v(a(952)),_=v(a(1003));function v(e){return e&&e.__esModule?e:{default:e}}var b="***************",E=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleShowClientSecret=function(e){e&&e.preventDefault&&e.preventDefault(),a.setState({clientSecret:a.props.oauthApp.client_secret})},a.handleHideClientSecret=function(e){e.preventDefault(),a.setState({clientSecret:b})},a.handleRegenerate=function(e){e.preventDefault(),a.props.onRegenerateSecret(a.props.oauthApp.id).then(function(){var e=a.props.regenOAuthAppSecretRequest.error;e?a.setState({error:e.message}):(a.setState({error:null}),a.handleShowClientSecret())})},a.handleDelete=function(){a.props.onDelete(a.props.oauthApp)},a.matchesFilter=function(e,t){return!t||-1!==e.name.toLowerCase().indexOf(t)},a.state={clientSecret:b},a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props.oauthApp,t=void 0;if(this.state.error&&(t=d.default.createElement(p.default,{error:this.state.error})),!this.matchesFilter(e,this.props.filter))return null;var a=void 0;a=e.name?e.name:d.default.createElement(u.FormattedMessage,{id:"installed_integrations.unnamed_oauth_app",defaultMessage:"Unnamed OAuth 2.0 Application"});var n=void 0;e.description&&(n=d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__description"},e.description)));var r=d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__url"},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}}))),o=void 0;o=e.is_trusted?m.localizeMessage("installed_oauth_apps.trusted.yes","Yes"):m.localizeMessage("installed_oauth_apps.trusted.no","No");var s=void 0,l=void 0;this.state.clientSecret===b?(s=d.default.createElement("button",{id:"showSecretButton",className:"style--none color--link",onClick:this.handleShowClientSecret},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.showSecret",defaultMessage:"Show Secret"})),l=d.default.createElement("span",{className:"item-details__token"},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.client_secret",defaultMessage:"Client Secret: **{clientSecret}**",values:{clientSecret:this.state.clientSecret}}))):(s=d.default.createElement("button",{id:"hideSecretButton",className:"style--none color--link",onClick:this.handleHideClientSecret},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.hideSecret",defaultMessage:"Hide Secret"})),l=d.default.createElement("span",{className:"item-details__token"},d.default.createElement(g.default,{id:"installed_integrations.client_secret",defaultMessage:"Client Secret: **{clientSecret}**",values:{clientSecret:this.state.clientSecret}}),d.default.createElement(h.default,{idMessage:"integrations.copy_client_secret",defaultMessage:"Copy Client Secret",value:this.state.clientSecret})));var i=d.default.createElement("button",{id:"regenerateSecretButton",className:"style--none color--link",onClick:this.handleRegenerate},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.regenSecret",defaultMessage:"Regenerate Secret"})),v=void 0;return e.icon_url&&(v=d.default.createElement("div",{className:"integration__icon integration-list__icon"},d.default.createElement("img",{src:e.icon_url}))),d.default.createElement("div",{className:"backstage-list__item"},v,d.default.createElement("div",{className:"item-details"},d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__name"},a)),t,n,d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__url"},d.default.createElement(g.default,{id:"installed_oauth_apps.is_trusted",defaultMessage:"Is Trusted: **{isTrusted}**",values:{isTrusted:o}}))),d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__token"},d.default.createElement(g.default,{id:"installed_integrations.client_id",defaultMessage:"Client ID: **{clientId}**",values:{clientId:e.id}}),d.default.createElement(h.default,{idMessage:"integrations.copy_client_id",defaultMessage:"Copy Client Id",value:e.id}))),d.default.createElement("div",{className:"item-details__row"},l),r,d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__creation"},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:m.getDisplayNameByUserId(e.creator_id),createAt:e.create_at}})))),d.default.createElement("div",{className:"item-actions"},s," - ",i," - ",d.default.createElement(c.Link,{to:"/"+this.props.team.name+"/integrations/oauth2-apps/edit?id="+e.id},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",d.default.createElement(_.default,{messageId:(0,f.t)("installed_oauth_apps.delete.confirm"),onDelete:this.handleDelete})))}}]),t}(d.default.PureComponent);E.propTypes={team:i.default.object,oauthApp:i.default.object.isRequired,regenOAuthAppSecretRequest:i.default.object.isRequired,onRegenerateSecret:i.default.func.isRequired,onDelete:i.default.func.isRequired,filter:i.default.string},t.default=E},2264:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=function(e){return e&&e.__esModule?e:{default:e}}(a(2265));t.default=(0,n.connect)(function(e){return{addOAuthAppRequest:e.requests.integrations.addOAuthApp}},function(e){return{actions:(0,r.bindActionCreators)({addOAuthApp:o.addOAuthApp},e)}})(s.default)},2265:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(181)),r=g(a(182)),o=g(a(282)),s=g(a(281)),l=g(a(285)),i=g(a(283)),d=g(a(284)),u=g(a(1)),c=g(a(3)),m=a(291),f=a(288),p=g(a(1406));function g(e){return e&&e.__esModule?e:{default:e}}var h={id:(0,f.t)("add_oauth_app.header"),defaultMessage:"Add"},_={id:(0,f.t)("installed_oauth_apps.save"),defaultMessage:"Save"},v=function(e){function t(e){var a=this;(0,s.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.addOAuthApp=function(){var e=(0,r.default)(n.default.mark(function e(t){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({serverError:""}),e.next=3,l.props.actions.addOAuthApp(t);case 3:if(r=e.sent,!(o=r.data)){e.next=8;break}return m.browserHistory.push("/"+l.props.team.name+"/integrations/confirm?type=oauth2-apps&id="+o.id),e.abrupt("return");case 8:l.props.addOAuthAppRequest.error&&l.setState({serverError:l.props.addOAuthAppRequest.error.message});case 9:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.state={serverError:""},l}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement(p.default,{team:this.props.team,header:h,footer:_,renderExtra:"",action:this.addOAuthApp,serverError:this.state.serverError})}}]),t}(c.default.PureComponent);v.propTypes={team:u.default.object,addOAuthAppRequest:u.default.object.isRequired,actions:u.default.shape({addOAuthApp:u.default.func.isRequired}).isRequired},t.default=v},2266:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=a(96),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2267));t.default=(0,n.connect)(function(e,t){var a=(0,s.getConfig)(e),n=new URLSearchParams(t.location.search).get("id"),r="true"===a.EnableOAuthServiceProvider;return{oauthAppId:n,oauthApp:e.entities.integrations.oauthApps[n],enableOAuthServiceProvider:r}},function(e){return{actions:(0,r.bindActionCreators)({getOAuthApp:o.getOAuthApp,editOAuthApp:o.editOAuthApp},e)}})(l.default)},2267:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(181)),r=_(a(182)),o=_(a(282)),s=_(a(281)),l=_(a(285)),i=_(a(283)),d=_(a(284)),u=_(a(3)),c=_(a(1)),m=a(766),f=a(291),p=_(a(785)),g=_(a(806)),h=_(a(1406));function _(e){return e&&e.__esModule?e:{default:e}}var v={id:"integrations.edit",defaultMessage:"Edit"},b={id:"update_incoming_webhook.update",defaultMessage:"Update"},E=function(e){function t(e){var a=this;(0,s.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.editOAuthApp=function(){var e=(0,r.default)(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.newApp=t,l.props.oauthApp.id&&(t.id=l.props.oauthApp.id),l.props.oauthApp.token&&(t.token=l.props.oauthApp.token),!1!==(l.props.oauthApp.callback_urls.length===t.callback_urls.length&&l.props.oauthApp.callback_urls.every(function(e,a){return e===t.callback_urls[a]}))){e.next=8;break}l.handleConfirmModal(),e.next=10;break;case 8:return e.next=10,l.submitOAuthApp();case 10:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.handleConfirmModal=function(){l.setState({showConfirmModal:!0})},l.confirmModalDismissed=function(){l.setState({showConfirmModal:!1})},l.submitOAuthApp=(0,r.default)(n.default.mark(function e(){var t,r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({serverError:""}),e.next=3,l.props.actions.editOAuthApp(l.newApp);case 3:if(t=e.sent,r=t.data,o=t.error,!r){e.next=9;break}return f.browserHistory.push("/"+l.props.team.name+"/integrations/oauth2-apps"),e.abrupt("return");case 9:l.setState({showConfirmModal:!1}),o&&l.setState({serverError:o.message});case 11:case"end":return e.stop()}},e,a)})),l.renderExtra=function(){var e=u.default.createElement(m.FormattedMessage,{id:"update_command.update",defaultMessage:"Update"}),t=u.default.createElement(m.FormattedMessage,{id:"update_oauth_app.confirm",defaultMessage:"Edit OAuth 2.0 application"}),a=u.default.createElement(m.FormattedMessage,{id:"update_oauth_app.question",defaultMessage:"Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?"});return u.default.createElement(g.default,{title:t,message:a,confirmButtonText:e,show:l.state.showConfirmModal,onConfirm:l.submitOAuthApp,onCancel:l.confirmModalDismissed})},l.state={showConfirmModal:!1,serverError:""},l}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.enableOAuthServiceProvider&&this.props.actions.getOAuthApp(this.props.oauthAppId)}},{key:"render",value:function(){return this.props.oauthApp?u.default.createElement(h.default,{team:this.props.team,header:v,footer:b,renderExtra:this.renderExtra(),action:this.editOAuthApp,serverError:this.state.serverError,initialApp:this.props.oauthApp}):u.default.createElement(p.default,null)}}]),t}(u.default.PureComponent);E.propTypes={team:c.default.object.isRequired,oauthAppId:c.default.string.isRequired,oauthApp:c.default.object,actions:c.default.shape({getOAuthApp:c.default.func.isRequired,editOAuthApp:c.default.func.isRequired}).isRequired,enableOAuthServiceProvider:c.default.bool},t.default=E},2268:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(794)),r=a(286),o=a(2),s=a(816),l=a(917),i=a(770),d=a(96),u=c(a(2269));function c(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.connect)(function(e){var t="true"===(0,d.getConfig)(e).EnableCommands;return{commands:(0,n.default)((0,l.getCommands)(e)),users:(0,i.getUsers)(e),enableCommands:t}},function(e){return{actions:(0,o.bindActionCreators)({getCustomTeamCommands:s.getCustomTeamCommands},e)}})(u.default)},2269:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(282)),r=_(a(281)),o=_(a(285)),s=_(a(283)),l=_(a(284)),i=_(a(42)),d=_(a(801)),u=_(a(1)),c=_(a(3)),m=a(287),f=_(a(2270)),p=_(a(2273)),g=_(a(2275)),h=_(a(1408));function _(e){return e&&e.__esModule?e:{default:e}}var v=function(e){var t=e.component,a=e.extraProps,n=(0,d.default)(e,["component","extraProps"]);return c.default.createElement(m.Route,(0,i.default)({},n,{render:function(e){return c.default.createElement(t,(0,i.default)({},a,e))}}))},b=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={loading:!0},a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableCommands&&this.props.actions.getCustomTeamCommands(this.props.team.id).then(function(){return e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t={loading:this.state.loading,commands:this.props.commands||[],users:this.props.users,team:this.props.team,user:this.props.user};return c.default.createElement("div",null,c.default.createElement(m.Switch,null,c.default.createElement(m.Route,{exact:!0,path:this.props.match.url+"/",render:function(){return c.default.createElement(m.Redirect,{to:e.props.match.url+"/installed"})}}),c.default.createElement(v,{extraProps:t,path:this.props.match.url+"/installed",component:f.default}),c.default.createElement(v,{extraProps:t,path:this.props.match.url+"/add",component:p.default}),c.default.createElement(v,{extraProps:t,path:this.props.match.url+"/edit",component:g.default}),c.default.createElement(v,{extraProps:t,path:this.props.match.url+"/confirm",component:h.default})))}}]),t}(c.default.PureComponent);b.propTypes={team:u.default.object,user:u.default.object,users:u.default.object,commands:u.default.array,match:u.default.shape({url:u.default.string.isRequired}).isRequired,actions:u.default.shape({getCustomTeamCommands:u.default.func.isRequired}).isRequired,enableCommands:u.default.bool},t.default=b},2270:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=a(294),l=a(25),i=function(e){return e&&e.__esModule?e:{default:e}}(a(2271));t.default=(0,n.connect)(function(e,t){return{canManageOthersSlashCommands:(0,s.haveITeamPermission)(e,{team:t.team.id,permission:l.Permissions.MANAGE_OTHERS_SLASH_COMMANDS})}},function(e){return{actions:(0,r.bindActionCreators)({regenCommandToken:o.regenCommandToken,deleteCommand:o.deleteCommand},e)}})(i.default)},2271:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(282)),r=p(a(281)),o=p(a(285)),s=p(a(283)),l=p(a(284)),i=p(a(1)),d=p(a(3)),u=a(766),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(765)),m=p(a(1002)),f=p(a(2272));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){var e,a,o,l;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),u=0;u<i;u++)d[u]=arguments[u];return a=o=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),o.regenCommandToken=function(e){o.props.actions.regenCommandToken(e.id)},o.deleteCommand=function(e){o.props.actions.deleteCommand(e.id)},l=a,(0,s.default)(o,l)}return(0,l.default)(t,e),(0,o.default)(t,[{key:"commandCompare",value:function(e,t){var a=e.display_name;a||(a=c.localizeMessage("installed_commands.unnamed_command","Unnamed Slash Command"));var n=t.display_name;return n||(n=c.localizeMessage("installed_commands.unnamed_command","Unnamed Slash Command")),a.localeCompare(n)}},{key:"render",value:function(){var e=this,t=this.props.commands.filter(function(t){return t.team_id===e.props.team.id}).sort(this.commandCompare).map(function(t){var a=e.props.canManageOthersSlashCommands||e.props.user.id===t.creator_id;return d.default.createElement(f.default,{key:t.id,team:e.props.team,command:t,onRegenToken:e.regenCommandToken,onDelete:e.deleteCommand,creator:e.props.users[t.creator_id]||{},canChange:a})});return d.default.createElement(m.default,{header:d.default.createElement(u.FormattedMessage,{id:"installed_commands.header",defaultMessage:"Installed Slash Commands"}),addText:d.default.createElement(u.FormattedMessage,{id:"installed_commands.add",defaultMessage:"Add Slash Command"}),addLink:"/"+this.props.team.name+"/integrations/commands/add",emptyText:d.default.createElement(u.FormattedMessage,{id:"installed_commands.empty",defaultMessage:"No slash commands found"}),helpText:d.default.createElement(u.FormattedMessage,{id:"installed_commands.help",defaultMessage:"Use slash commands to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.",values:{buildYourOwn:d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/slash-commands.html"},d.default.createElement(u.FormattedMessage,{id:"installed_commands.help.buildYourOwn",defaultMessage:"Build your own"})),appDirectory:d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},d.default.createElement(u.FormattedMessage,{id:"installed_commands.help.appDirectory",defaultMessage:"App Directory"}))}}),searchPlaceholder:c.localizeMessage("installed_commands.search","Search Slash Commands"),loading:this.props.loading},t)}}]),t}(d.default.PureComponent);g.propTypes={team:i.default.object,user:i.default.object,users:i.default.object,commands:i.default.array,loading:i.default.bool,canManageOthersSlashCommands:i.default.bool,actions:i.default.shape({regenCommandToken:i.default.func.isRequired,deleteCommand:i.default.func.isRequired}).isRequired},t.default=g},2272:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(282)),r=g(a(281)),o=g(a(285)),s=g(a(283)),l=g(a(284)),i=g(a(1)),d=g(a(3)),u=a(766),c=a(287),m=a(288),f=g(a(952)),p=g(a(1003));function g(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){var e,a,o,l;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),u=0;u<i;u++)d[u]=arguments[u];return a=o=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),o.handleRegenToken=function(e){e.preventDefault(),o.props.onRegenToken(o.props.command)},o.handleDelete=function(){o.props.onDelete(o.props.command)},l=a,(0,s.default)(o,l)}return(0,l.default)(t,e),(0,o.default)(t,[{key:"matchesFilter",value:function(e,t){return!t||(-1!==e.display_name.toLowerCase().indexOf(t)||-1!==e.description.toLowerCase().indexOf(t)||-1!==e.trigger.toLowerCase().indexOf(t))}},{key:"render",value:function(){var e=this.props.command,t=this.props.filter?this.props.filter.toLowerCase():"";if(!this.matchesFilter(e,t))return null;var a=void 0;a=e.display_name?e.display_name:d.default.createElement(u.FormattedMessage,{id:"installed_commands.unnamed_command",defaultMessage:"Unnamed Slash Command"});var n=null;e.description&&(n=d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__description"},e.description)));var r="- /"+e.trigger;e.auto_complete&&e.auto_complete_hint&&(r+=" "+e.auto_complete_hint);var o=null;this.props.canChange&&(o=d.default.createElement("div",{className:"item-actions"},d.default.createElement("button",{className:"style--none color--link",onClick:this.handleRegenToken},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.regenToken",defaultMessage:"Regenerate Token"}))," - ",d.default.createElement(c.Link,{to:"/"+this.props.team.name+"/integrations/commands/edit?id="+e.id},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",d.default.createElement(p.default,{messageId:(0,m.t)("installed_commands.delete.confirm"),onDelete:this.handleDelete})));var s=e.token;return d.default.createElement("div",{className:"backstage-list__item"},d.default.createElement("div",{className:"item-details"},d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__name"},a),d.default.createElement("span",{className:"item-details__trigger"},r)),n,d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__token"},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.token",defaultMessage:"Token: {token}",values:{token:s}}),d.default.createElement(f.default,{value:s}))),d.default.createElement("div",{className:"item-details__row"},d.default.createElement("span",{className:"item-details__creation"},d.default.createElement(u.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:e.create_at}})))),o)}}]),t}(d.default.PureComponent);h.propTypes={team:i.default.object.isRequired,command:i.default.object.isRequired,onRegenToken:i.default.func.isRequired,onDelete:i.default.func.isRequired,filter:i.default.string,creator:i.default.object.isRequired,canChange:i.default.bool.isRequired},t.default=h},2273:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=function(e){return e&&e.__esModule?e:{default:e}}(a(2274));t.default=(0,n.connect)(null,function(e){return{actions:(0,r.bindActionCreators)({addCommand:o.addCommand},e)}})(s.default)},2274:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(181)),r=g(a(182)),o=g(a(282)),s=g(a(281)),l=g(a(285)),i=g(a(283)),d=g(a(284)),u=g(a(1)),c=g(a(3)),m=a(291),f=a(288),p=g(a(1407));function g(e){return e&&e.__esModule?e:{default:e}}var h={id:(0,f.t)("integrations.add"),defaultMessage:"Add"},_={id:(0,f.t)("add_command.save"),defaultMessage:"Save"},v=function(e){function t(e){var a=this;(0,s.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.addCommand=function(){var e=(0,r.default)(n.default.mark(function e(t){var r,o,s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({serverError:""}),e.next=3,l.props.actions.addCommand(t);case 3:if(r=e.sent,o=r.data,s=r.error,!o){e.next=9;break}return m.browserHistory.push("/"+l.props.team.name+"/integrations/commands/confirm?type=commands&id="+o.id),e.abrupt("return");case 9:s&&l.setState({serverError:s.message});case 10:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),l.state={serverError:""},l}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement(p.default,{team:this.props.team,header:h,footer:_,renderExtra:"",action:this.addCommand,serverError:this.state.serverError})}}]),t}(c.default.PureComponent);v.propTypes={team:u.default.object,actions:u.default.shape({addCommand:u.default.func.isRequired}).isRequired},t.default=v},2275:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(286),r=a(2),o=a(816),s=a(917),l=a(96),i=function(e){return e&&e.__esModule?e:{default:e}}(a(2276));t.default=(0,n.connect)(function(e,t){var a=(0,l.getConfig)(e),n=new URLSearchParams(t.location.search).get("id"),r="true"===a.EnableCommands;return{commandId:n,commands:(0,s.getCommands)(e),enableCommands:r}},function(e){return{actions:(0,r.bindActionCreators)({getCustomTeamCommands:o.getCustomTeamCommands,editCommand:o.editCommand},e)}})(i.default)},2276:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a(794)),r=b(a(181)),o=b(a(182)),s=b(a(282)),l=b(a(281)),i=b(a(285)),d=b(a(283)),u=b(a(284)),c=b(a(1)),m=b(a(3)),f=a(766),p=a(291),g=a(288),h=b(a(785)),_=b(a(806)),v=b(a(1407));function b(e){return e&&e.__esModule?e:{default:e}}var E={id:(0,g.t)("integrations.edit"),defaultMessage:"Edit"},k={id:(0,g.t)("edit_command.save"),defaultMessage:"Update"},M=function(e){function t(e){var a=this;(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.editCommand=function(){var e=(0,o.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.newCommand=t,n.state.originalCommand.id&&(t.id=n.state.originalCommand.id),n.state.originalCommand.url===n.newCommand.url&&n.state.originalCommand.trigger===n.newCommand.trigger&&n.state.originalCommand.method===n.newCommand.method){e.next=6;break}n.handleConfirmModal(),e.next=8;break;case 6:return e.next=8,n.submitCommand();case 8:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),n.handleConfirmModal=function(){n.setState({showConfirmModal:!0})},n.confirmModalDismissed=function(){n.setState({showConfirmModal:!1})},n.submitCommand=(0,o.default)(r.default.mark(function e(){var t,o,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.editCommand(n.newCommand);case 3:if(t=e.sent,o=t.data,s=t.error,!o){e.next=9;break}return p.browserHistory.push("/"+n.props.team.name+"/integrations/commands"),e.abrupt("return");case 9:n.setState({showConfirmModal:!1}),s&&n.setState({serverError:s.message});case 11:case"end":return e.stop()}},e,a)})),n.renderExtra=function(){var e=m.default.createElement(f.FormattedMessage,{id:"update_command.update",defaultMessage:"Update"}),t=m.default.createElement(f.FormattedMessage,{id:"update_command.confirm",defaultMessage:"Edit Slash Command"}),a=m.default.createElement(f.FormattedMessage,{id:"update_command.question",defaultMessage:"Your changes may break the existing slash command. Are you sure you would like to update it?"});return m.default.createElement(_.default,{title:t,message:a,confirmButtonText:e,show:n.state.showConfirmModal,onConfirm:n.submitCommand,onCancel:n.confirmModalDismissed})},n.state={originalCommand:null,showConfirmModal:!1,serverError:""},n}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableCommands&&this.props.actions.getCustomTeamCommands(this.props.team.id).then(function(){e.setState({originalCommand:(0,n.default)(e.props.commands).filter(function(t){return t.id===e.props.commandId})[0]})})}},{key:"render",value:function(){return this.state.originalCommand?m.default.createElement(v.default,{team:this.props.team,header:E,footer:k,renderExtra:this.renderExtra(),action:this.editCommand,serverError:this.state.serverError,initialCommand:this.state.originalCommand}):m.default.createElement(h.default,null)}}]),t}(m.default.PureComponent);M.propTypes={team:c.default.object.isRequired,commandId:c.default.string.isRequired,commands:c.default.object,actions:c.default.shape({getCustomTeamCommands:c.default.func.isRequired,editCommand:c.default.func.isRequired}).isRequired,enableCommands:c.default.bool},t.default=M},2277:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(282)),r=v(a(281)),o=v(a(283)),s=v(a(285)),l=v(a(284)),i=v(a(1)),d=v(a(3)),u=a(766),c=a(287),m=a(291),f=a(22),p=v(a(952)),g=v(a(916)),h=a(786),_=v(a(777));function v(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleKeyPress=function(e){"Enter"===e.key&&m.browserHistory.push("/"+a.props.team.name+"/integrations/"+a.state.type)},a.state={type:new URLSearchParams(a.props.location.search).get("type"),id:new URLSearchParams(a.props.location.search).get("id")},a}return(0,l.default)(t,e),(0,s.default)(t,null,[{key:"propTypes",get:function(){return{team:i.default.object,location:i.default.object,commands:i.default.object,oauthApps:i.default.object,incomingHooks:i.default.object,outgoingHooks:i.default.object}}}]),(0,s.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keypress",this.handleKeyPress)}},{key:"render",value:function(){var e=null,t=null,a=null,n=this.props.commands[this.state.id],r=this.props.incomingHooks[this.state.id],o=this.props.outgoingHooks[this.state.id],s=this.props.oauthApps[this.state.id];if(this.state.type===f.Constants.Integrations.COMMAND&&n){var l=n.token;e=d.default.createElement(u.FormattedMessage,{id:"installed_commands.header",defaultMessage:"Slash Commands"}),t=d.default.createElement("p",null,d.default.createElement(_.default,{id:"add_command.doneHelp",defaultMessage:"Your slash command has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see [documentation](!https://docs.mattermost.com/developer/slash-commands.html) for further details)."})),a=d.default.createElement("p",{className:"word-break--all"},d.default.createElement(_.default,{id:"add_command.token",defaultMessage:"**Token**: {token}",values:{token:l}}),d.default.createElement(p.default,{value:l}))}else if(this.state.type===f.Constants.Integrations.INCOMING_WEBHOOK&&r){var i=(0,h.getSiteURL)()+"/hooks/"+r.id;e=d.default.createElement(u.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"}),t=d.default.createElement("p",null,d.default.createElement(_.default,{id:"add_incoming_webhook.doneHelp",defaultMessage:"Your incoming webhook has been set up. Please send data to the following URL (see [documentation](!https://docs.mattermost.com/developer/webhooks-incoming.html) for further details)."})),a=d.default.createElement("p",{className:"word-break--all"},d.default.createElement(_.default,{id:"add_incoming_webhook.url",defaultMessage:"**URL**: {url}",values:{url:i}}),d.default.createElement(p.default,{idMessage:"integrations.copy_client_secret",defaultMessage:"Copy Client Secret",value:i}))}else if(this.state.type===f.Constants.Integrations.OUTGOING_WEBHOOK&&o){var v=o.token;e=d.default.createElement(u.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Outgoing Webhooks"}),t=d.default.createElement("p",null,d.default.createElement(_.default,{id:"add_outgoing_webhook.doneHelp",defaultMessage:"Your outgoing webhook has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see [documentation](!https://docs.mattermost.com/developer/webhooks-outgoing.html) for further details)."})),a=d.default.createElement("p",{className:"word-break--all"},d.default.createElement(_.default,{id:"add_outgoing_webhook.token",defaultMessage:"**Token**: {token}",values:{token:v}}),d.default.createElement(p.default,{value:v}))}else{if(this.state.type!==f.Constants.Integrations.OAUTH_APP||!s)return m.browserHistory.replace("/error?type="+f.ErrorPageTypes.PAGE_NOT_FOUND),"";var b=s.id,E=s.client_secret;e=d.default.createElement(u.FormattedMessage,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),(t=[]).push(d.default.createElement("p",{key:"add_oauth_app.doneHelp"},d.default.createElement(_.default,{id:"add_oauth_app.doneHelp",defaultMessage:"Your OAuth 2.0 application has been set up. Please use the following Client ID and Client Secret when requesting authorization for your application (see [documentation](!https://docs.mattermost.com/developer/oauth-2-0-applications.html) for further details)."}))),t.push(d.default.createElement("p",{key:"add_oauth_app.clientId"},d.default.createElement(_.default,{id:"add_oauth_app.clientId",defaultMessage:"**Client ID**: {id}",values:{id:b}}),d.default.createElement(p.default,{idMessage:"integrations.copy_client_id",defaultMessage:"Copy Client Id",value:b}),d.default.createElement("br",null),d.default.createElement(_.default,{id:"add_oauth_app.clientSecret",defaultMessage:"**Client Secret**: {secret}",values:{secret:E}}),d.default.createElement(p.default,{idMessage:"integrations.copy_client_secret",defaultMessage:"Copy Client Secret",value:E}))),t.push(d.default.createElement("p",{key:"add_oauth_app.doneUrlHelp"},d.default.createElement(u.FormattedMessage,{id:"add_oauth_app.doneUrlHelp",defaultMessage:"The following are your authorized redirect URL(s)."}))),a=d.default.createElement("p",{className:"word-break--all"},d.default.createElement(_.default,{id:"add_oauth_app.url",defaultMessage:"**URL(s)**: {url}",values:{url:s.callback_urls}}))}return d.default.createElement("div",{className:"backstage-content row"},d.default.createElement(g.default,null,d.default.createElement(c.Link,{to:"/"+this.props.team.name+"/integrations/"+this.state.type},e),d.default.createElement(u.FormattedMessage,{id:"integrations.add",defaultMessage:"Add"})),d.default.createElement("div",{className:"backstage-form backstage-form__confirmation"},d.default.createElement("h4",{className:"backstage-form__title"},d.default.createElement(u.FormattedMessage,{id:"integrations.successful",defaultMessage:"Setup Successful"})),t,a,d.default.createElement("div",{className:"backstage-form__footer"},d.default.createElement(c.Link,{className:"btn btn-primary",type:"submit",to:"/"+this.props.team.name+"/integrations/"+this.state.type},d.default.createElement(u.FormattedMessage,{id:"integrations.done",defaultMessage:"Done"})))))}}]),t}(d.default.Component);t.default=b},2278:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(282)),r=h(a(281)),o=h(a(285)),s=h(a(283)),l=h(a(284)),i=h(a(1)),d=h(a(3)),u=a(766),c=a(25),m=h(a(870)),f=h(a(827)),p=h(a(2279)),g=h(a(2280));function h(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"renderCustomEmoji",value:function(){return this.props.enableCustomEmoji&&this.props.canCreateCustomEmoji?d.default.createElement(p.default,{name:"emoji",parentLink:"/"+this.props.team.name,icon:"fa-smile-o",title:d.default.createElement(u.FormattedMessage,{id:"backstage_sidebar.emoji",defaultMessage:"Custom Emoji"})}):null}},{key:"renderIntegrations",value:function(){if(!(this.props.enableIncomingWebhooks||this.props.enableOutgoingWebhooks||this.props.enableCommands||this.props.enableOAuthServiceProvider))return null;var e=null;this.props.enableIncomingWebhooks&&(e=d.default.createElement(f.default,{permissions:[c.Permissions.MANAGE_WEBHOOKS],teamId:this.props.team.id},d.default.createElement(g.default,{name:"incoming_webhooks",parentLink:"/"+this.props.team.name+"/integrations",title:d.default.createElement(u.FormattedMessage,{id:"backstage_sidebar.integrations.incoming_webhooks",defaultMessage:"Incoming Webhooks"})})));var t=null;this.props.enableOutgoingWebhooks&&(t=d.default.createElement(f.default,{permissions:[c.Permissions.MANAGE_WEBHOOKS],teamId:this.props.team.id},d.default.createElement(g.default,{name:"outgoing_webhooks",parentLink:"/"+this.props.team.name+"/integrations",title:d.default.createElement(u.FormattedMessage,{id:"backstage_sidebar.integrations.outgoing_webhooks",defaultMessage:"Outgoing Webhooks"})})));var a=null;this.props.enableCommands&&(a=d.default.createElement(f.default,{permissions:[c.Permissions.MANAGE_SLASH_COMMANDS],teamId:this.props.team.id},d.default.createElement(g.default,{name:"commands",parentLink:"/"+this.props.team.name+"/integrations",title:d.default.createElement(u.FormattedMessage,{id:"backstage_sidebar.integrations.commands",defaultMessage:"Slash Commands"})})));var n=null;return this.props.enableOAuthServiceProvider&&(n=d.default.createElement(m.default,{permissions:[c.Permissions.MANAGE_OAUTH]},d.default.createElement(g.default,{name:"oauth2-apps",parentLink:"/"+this.props.team.name+"/integrations",title:d.default.createElement(u.FormattedMessage,{id:"backstage_sidebar.integrations.oauthApps",defaultMessage:"OAuth 2.0 Applications"})}))),d.default.createElement(f.default,{permissions:[c.Permissions.MANAGE_WEBHOOKS,c.Permissions.MANAGE_SLASH_COMMANDS,c.Permissions.MANAGE_OAUTH],teamId:this.props.team.id},d.default.createElement(p.default,{name:"integrations",icon:"fa-link",parentLink:"/"+this.props.team.name,title:d.default.createElement(u.FormattedMessage,{id:"backstage_sidebar.integrations",defaultMessage:"Integrations"})},e,t,a,n))}},{key:"render",value:function(){return d.default.createElement("div",{className:"backstage-sidebar"},d.default.createElement("ul",null,this.renderCustomEmoji(),this.renderIntegrations()))}}],[{key:"propTypes",get:function(){return{team:i.default.object.isRequired,user:i.default.object.isRequired,enableCustomEmoji:i.default.bool.isRequired,enableIncomingWebhooks:i.default.bool.isRequired,enableOutgoingWebhooks:i.default.bool.isRequired,enableCommands:i.default.bool.isRequired,enableOAuthServiceProvider:i.default.bool.isRequired,canCreateCustomEmoji:i.default.bool.isRequired}}}]),t}(d.default.Component);t.default=_},2279:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(282)),r=c(a(281)),o=c(a(285)),s=c(a(283)),l=c(a(284)),i=c(a(1)),d=c(a(3)),u=a(287);function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.title,n=e.icon,r=e.parentLink,o=e.children,s=r+"/"+t;return d.default.createElement("li",{className:"backstage-sidebar__category"},d.default.createElement(u.NavLink,{to:s,className:"category-title",activeClassName:"category-title--active"},d.default.createElement("i",{className:"fa "+n}),d.default.createElement("span",{className:"category-title__text"},a)),d.default.createElement(u.Route,{path:s,render:function(){return d.default.createElement("ul",{className:"sections"},d.default.Children.map(o,function(e){return e?d.default.cloneElement(e,{parentLink:s}):e}))}}))}}],[{key:"propTypes",get:function(){return{name:i.default.string.isRequired,title:i.default.node.isRequired,icon:i.default.string.isRequired,parentLink:i.default.string,children:i.default.arrayOf(i.default.element)}}},{key:"defaultProps",get:function(){return{parentLink:"",children:[]}}},{key:"contextTypes",get:function(){return{router:i.default.object.isRequired}}}]),t}(d.default.Component);t.default=m},2280:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(282)),r=c(a(281)),o=c(a(285)),s=c(a(283)),l=c(a(284)),i=c(a(1)),d=c(a(3)),u=a(287);function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"getLink",value:function(){return this.props.parentLink+"/"+this.props.name}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.subsection,n=e.children,r=this.getLink(),o=null;n.length>0&&(o=d.default.createElement("ul",{className:"subsections"},d.default.Children.map(n,function(e){return d.default.cloneElement(e,{parentLink:r,subsection:!0})})));var s="section";return a&&(s="subsection"),d.default.createElement("li",{className:s},d.default.createElement(u.NavLink,{className:s+"-title",activeClassName:s+"-title--active",to:r},d.default.createElement("span",{className:s+"-title__text"},t)),o)}}],[{key:"propTypes",get:function(){return{name:i.default.string.isRequired,title:i.default.node.isRequired,parentLink:i.default.string,subsection:i.default.bool,children:i.default.arrayOf(i.default.element)}}},{key:"defaultProps",get:function(){return{parentLink:"",subsection:!1,children:[]}}},{key:"contextTypes",get:function(){return{router:i.default.object.isRequired}}}]),t}(d.default.Component);t.default=m},2281:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(282)),r=p(a(281)),o=p(a(285)),s=p(a(283)),l=p(a(284)),i=p(a(1)),d=p(a(3)),u=a(766),c=a(287),m=a(22),f=a(765);function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return this.props.team?d.default.createElement("div",{className:"backstage-navbar"},d.default.createElement(c.Link,{className:"backstage-navbar__back",to:"/"+this.props.team.name+"/channels/"+m.Constants.DEFAULT_CHANNEL},d.default.createElement("i",{className:"fa fa-angle-left",title:(0,f.localizeMessage)("generic_icons.back","Back Icon")}),d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"backstage_navbar.backToMattermost",defaultMessage:"Back to {siteName}",values:{siteName:this.props.siteName}})))):null}}],[{key:"propTypes",get:function(){return{team:i.default.object.isRequired,siteName:i.default.string}}}]),t}(d.default.Component);t.default=g},916:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(282)),r=c(a(281)),o=c(a(285)),s=c(a(283)),l=c(a(284)),i=c(a(1)),d=c(a(3)),u=a(765);function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=[];return d.default.Children.forEach(this.props.children,function(t,a){0!==a&&e.push(d.default.createElement("span",{key:"divider"+a,className:"backstage-header__divider"},d.default.createElement("i",{className:"fa fa-angle-right",title:(0,u.localizeMessage)("generic_icons.breadcrumb","Breadcrumb Icon")}))),e.push(t)}),d.default.createElement("div",{className:"backstage-header"},d.default.createElement("h1",null,e))}}],[{key:"propTypes",get:function(){return{children:i.default.node}}}]),t}(d.default.Component);t.default=m},917:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutocompleteCommandsList=t.getAllCommands=t.getOutgoingHooksInCurrentTeam=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getIncomingHooks=function(e){return e.entities.integrations.incomingHooks},t.getOutgoingHooks=s,t.getCommands=l,t.getOAuthApps=function(e){return e.entities.integrations.oauthApps},t.getSystemCommands=i;var r=a(82),o=a(289);function s(e){return e.entities.integrations.outgoingHooks}function l(e){return e.entities.integrations.commands}function i(e){return e.entities.integrations.systemCommands}t.getOutgoingHooksInCurrentTeam=(0,r.createSelector)(o.getCurrentTeamId,s,function(e,t){return Object.values(t).filter(function(t){return t.teamId===e})});var d=t.getAllCommands=(0,r.createSelector)(l,i,function(e,t){return n({},e,t)});t.getAutocompleteCommandsList=(0,r.createSelector)(d,o.getCurrentTeamId,function(e,t){return Object.values(e).filter(function(e){return e&&(!e.team_id||e.team_id===t)&&e.auto_complete}).sort(function(e,t){return e.display_name.localeCompare(t.display_name)})})},951:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(42)),r=p(a(801)),o=p(a(282)),s=p(a(281)),l=p(a(285)),i=p(a(283)),d=p(a(284)),u=p(a(1)),c=a(3),m=p(c),f=p(a(868));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){return(0,s.default)(this,t),(0,i.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.spinning,a=e.children,o=(0,r.default)(e,["spinning","children"]);return t?m.default.createElement("img",{className:"spinner-button__gif",src:f.default}):m.default.createElement("button",(0,n.default)({className:"btn btn-primary"},o),a)}}]),t}(c.PureComponent);g.defaultProps={spinning:!1},g.propTypes={children:u.default.node,spinning:u.default.bool.isRequired,onClick:u.default.func},t.default=g},952:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(282)),r=p(a(281)),o=p(a(285)),s=p(a(283)),l=p(a(284)),i=p(a(1)),d=p(a(3)),u=a(766),c=a(769),m=p(a(22)),f=a(765);function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){var e,a,o,l;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),u=0;u<i;u++)d[u]=arguments[u];return a=o=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),o.copyText=function(e){e.preventDefault(),(0,f.copyToClipboard)(o.props.value)},l=a,(0,s.default)(o,l)}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){if(!document.queryCommandSupported("copy"))return null;var e=d.default.createElement(c.Tooltip,{id:"copy"},d.default.createElement(u.FormattedMessage,{id:this.props.idMessage,defaultMessage:this.props.defaultMessage}));return d.default.createElement(c.OverlayTrigger,{trigger:["hover","focus"],delayShow:m.default.OVERLAY_TIME_DELAY,placement:"top",overlay:e},d.default.createElement("a",{href:"#",className:"fa fa-copy margin-left",onClick:this.copyText}))}}],[{key:"defaultProps",get:function(){return{idMessage:"integrations.copy",defaultMessage:"Copy"}}}]),t}(d.default.PureComponent);g.propTypes={value:i.default.string.isRequired,defaultMessage:i.default.string,idMessage:i.default.string},t.default=g}}]);
//# sourceMappingURL=9.ec57e06b3a0fe80c5f14.js.map